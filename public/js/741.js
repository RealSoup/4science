"use strict";(self.webpackChunk_4science=self.webpackChunk_4science||[]).push([[741],{23405:(a,t,e)=>{e.d(t,{Z:()=>i});var o=e(23645),r=e.n(o)()((function(a){return a[1]}));r.push([a.id,'.w_fence[data-v-23a9a7ac]{padding-left:0;padding-right:0}.w_fence .container[data-v-23a9a7ac],.w_fence .container .row[data-v-23a9a7ac],.w_fence .container .row .col[data-v-23a9a7ac]{margin:0;padding:0}h3[data-v-23a9a7ac]{font-size:1.5rem}h3 b[data-v-23a9a7ac]{color:#0094ea;font-size:1.3rem}h6[data-v-23a9a7ac]{font-size:1.15rem;font-weight:600;margin-top:2rem;padding-left:2rem}.w_fence .top[data-v-23a9a7ac]{border-left:1px solid #b7b7b7;border-top:2px solid #4f637b}.w_fence .top .row .col[data-v-23a9a7ac]{border-bottom:1px solid #b7b7b7;border-right:1px solid #b7b7b7;padding:1.2rem 0;text-align:center}.w_fence .top .row .col[data-v-23a9a7ac]:nth-of-type(4){flex:0 0 40%;max-width:40%}.w_fence .top .row .col span[data-v-23a9a7ac]{font-weight:600;margin-right:.7rem}.w_fence .top .row .col b[data-v-23a9a7ac]{color:#0094ea}.w_fence .top_border[data-v-23a9a7ac]{border-top:3px solid #4f637b}.pa_list[data-v-23a9a7ac]{margin-bottom:2.5rem;padding:0}.pa_list .row[data-v-23a9a7ac]{border-bottom:1px solid #d6d6d6;margin:0}.pa_list .row .col[data-v-23a9a7ac]{color:#666;font-size:.93rem;padding:0}.pa_list .row.lbody .col[data-v-23a9a7ac]:not(:nth-of-type(2)){align-items:center;display:flex;justify-content:center;text-align:center}.pa_list .row .col .row[data-v-23a9a7ac]:last-child{border-bottom-width:0}.pa_list .row.lbody>.col[data-v-23a9a7ac]:first-child{border-right:1px solid #d6d6d6}.pa_list .row.lbody>.col[data-v-23a9a7ac]:last-child{border-left:1px solid #d6d6d6}.pa_list .lhead .col[data-v-23a9a7ac]{color:#000;font-weight:700;padding:.74rem 0!important;text-align:center}.pa_list .lhead .col[data-v-23a9a7ac]:nth-of-type(2){flex-basis:11.2%;max-width:11.2%}.pa_list .lhead .col[data-v-23a9a7ac]:nth-of-type(3){flex-basis:8.8%;max-width:8.8%}.pa_list .lhead .col[data-v-23a9a7ac]:nth-of-type(4){flex-basis:7.2%;max-width:7.2%}.pa_list .lhead .col[data-v-23a9a7ac]:nth-of-type(5){flex-basis:9.6%;max-width:9.6%}.pa_list .lhead .col[data-v-23a9a7ac]:nth-of-type(6){flex-basis:10%;max-width:10%}.pa_list .lbody>.col[data-v-23a9a7ac]:first-of-type,.pa_list .lbody>.col[data-v-23a9a7ac]:nth-of-type(3){color:#000;flex-basis:10%;font-weight:600;max-width:10%}.pa_list .lbody .col .row .col[data-v-23a9a7ac]:first-of-type{flex-basis:18%;max-width:18%}.pa_list .lbody .col .row .col[data-v-23a9a7ac]:nth-of-type(3){flex-basis:14%;max-width:14%}.pa_list .lbody .col .row .col[data-v-23a9a7ac]:nth-of-type(4){flex-basis:11%;justify-content:flex-end;max-width:11%;padding-right:.5rem}.pa_list .lbody .col .row .col[data-v-23a9a7ac]:nth-of-type(5){flex-basis:9%;justify-content:flex-end;max-width:9%;padding-right:.5rem}.pa_list .lbody .col .row .col[data-v-23a9a7ac]:nth-of-type(6){color:#000;flex-basis:12%;font-weight:600;justify-content:flex-end;max-width:12%;padding-right:.5rem}.pa_list .lbody .col .row .col:nth-of-type(6) span[data-v-23a9a7ac]{color:#666;font-size:.7rem}.pa_list .row .col .row.option[data-v-23a9a7ac]{background:#f4f1ec}.pa_list .row .col .row .col[data-v-23a9a7ac]{padding:.8rem 0}.pa_list .row .col .row .col img[data-v-23a9a7ac]{height:119px;-o-object-fit:cover;object-fit:cover;width:119px}.pa_list .row .col .row .col p[data-v-23a9a7ac]{margin-bottom:.2rem}.pa_list .row .col .row .col[data-v-23a9a7ac]:nth-of-type(2){padding-left:1rem}.pa_list .row .col .row .col:nth-of-type(2) p[data-v-23a9a7ac]:first-of-type{color:#000;font-weight:700;margin-bottom:.8rem}.pa_list .row .col[data-v-23a9a7ac] .myCheck{display:inline-block;margin:0 .5rem;padding-left:1.3em}.pa_list .row .col[data-v-23a9a7ac] .myCheck .custom-control-label:after,.pa_list .row .col[data-v-23a9a7ac] .myCheck .custom-control-label:before{height:1.8rem;top:-2px;width:1.8rem}.pa_list .total[data-v-23a9a7ac]{border-bottom:1px solid #d6d6d6;border-top:2px solid #363636;margin-top:1.6rem}.pa_list .total .col[data-v-23a9a7ac]{color:#000;font-weight:700}.pa_list .total .col[data-v-23a9a7ac]:nth-of-type(odd){align-items:center;display:flex;flex-basis:12%;font-size:.9vw;max-width:12%;padding:1vw 0 1vw 2vw}.pa_list .total .col[data-v-23a9a7ac]:nth-of-type(2n){padding:1vw 2vw 1vw 0;text-align:right}.pa_list .total .col[data-v-23a9a7ac]:nth-of-type(2):after,.pa_list .total .col[data-v-23a9a7ac]:nth-of-type(4):after{background:#707070;border-radius:13px;color:#fff;font-size:1.4rem;height:25px;line-height:1.32rem;position:absolute;right:-14px;text-align:center;top:50%;transform:translateY(-50%);width:25px}.pa_list .total .col b[data-v-23a9a7ac]{font-size:1.4rem}.pa_list .total .col[data-v-23a9a7ac]:nth-of-type(2){border-right:1px solid #d6d6d6}.pa_list .total .col[data-v-23a9a7ac]:nth-of-type(2):after{content:"+"}.pa_list .total .col[data-v-23a9a7ac]:nth-of-type(4){border-right:1px solid #d6d6d6}.pa_list .total .col[data-v-23a9a7ac]:nth-of-type(4):after{content:"="}.pa_list .total .col[data-v-23a9a7ac]:nth-of-type(5),.pa_list .total .col[data-v-23a9a7ac]:nth-of-type(6){flex-basis:20%;max-width:20%}.pa_list .total_sub[data-v-23a9a7ac]{background:#f2f3f5;border-bottom-width:0}.pa_list .total_sub>.col[data-v-23a9a7ac]:first-of-type,.pa_list .total_sub>.col[data-v-23a9a7ac]:nth-of-type(2){border-right:1px solid #d6d6d6}.pa_list .total_sub>.col[data-v-23a9a7ac]:nth-of-type(3){flex-basis:40%;max-width:40%}.pa_list .total_sub .col>div[data-v-23a9a7ac]{display:flex;flex-wrap:wrap}.pa_list .total_sub .col>div[data-v-23a9a7ac]:first-of-type{padding:1.3rem 3rem .5rem}.pa_list .total_sub .col>div[data-v-23a9a7ac]:nth-of-type(2){padding:0 3rem 2.5rem}.pa_list .total_sub .col>div .col[data-v-23a9a7ac]{color:#a8a9ab;font-size:.84rem;font-weight:700}.pa_list .total_sub .col>div .col[data-v-23a9a7ac]:nth-of-type(2){text-align:right}.w_fence .extra[data-v-23a9a7ac]{margin-top:2rem}.w_fence .extra .row .col[data-v-23a9a7ac]:first-child{margin-right:2rem}.w_fence .extra .row .col h6[data-v-23a9a7ac]{border-bottom:2px solid #707070;margin-bottom:.7rem;padding-bottom:.5rem}.w_fence .extra .row .col h6 b[data-v-23a9a7ac]{color:#0094ea}.w_fence .extra .row .col:first-child .desc[data-v-23a9a7ac]{border:1px solid #d6d6d6;min-height:calc(3vw + 5rem);padding:1rem}.w_fence .extra .row .col .btn[data-v-23a9a7ac]{font-size:.85rem;padding:.3rem}',""]);const i=r},50741:(a,t,e)=>{e.r(t),e.d(t,{default:()=>m});var o=e(87757),r=e.n(o),i=e(44670);function l(a,t,e,o,r,i,l){try{var c=a[i](l),n=c.value}catch(a){return void e(a)}c.done?t(n):Promise.resolve(n).then(o,r)}function c(a){return function(){var t=this,e=arguments;return new Promise((function(o,r){var i=a.apply(t,e);function c(a){l(i,o,r,c,n,"next",a)}function n(a){l(i,o,r,c,n,"throw",a)}c(void 0)}))}}function n(a,t){var e="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!e){if(Array.isArray(a)||(e=function(a,t){if(!a)return;if("string"==typeof a)return s(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);"Object"===e&&a.constructor&&(e=a.constructor.name);if("Map"===e||"Set"===e)return Array.from(a);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return s(a,t)}(a))||t&&a&&"number"==typeof a.length){e&&(a=e);var o=0,r=function(){};return{s:r,n:function(){return o>=a.length?{done:!0}:{done:!1,value:a[o++]}},e:function(a){throw a},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,c=!1;return{s:function(){e=e.call(a)},n:function(){var a=e.next();return l=a.done,a},e:function(a){c=!0,i=a},f:function(){try{l||null==e.return||e.return()}finally{if(c)throw i}}}}function s(a,t){(null==t||t>a.length)&&(t=a.length);for(var e=0,o=new Array(t);e<t;e++)o[e]=a[e];return o}const d={name:"mypageEstimateReplyShow",components:{LoadingModal:function(){return e.e(7632).then(e.bind(e,87632))},PaList:function(){return e.e(8302).then(e.bind(e,28302))}},data:function(){return{isLoadingModalViewed:!0,reply:{},gd_price:0,surtax:0,dlvy_4s:0,dlvy_other:0,air_price:0,all_price:0,sum_mileage:0,indeterminate:!1,all_chk:!0}},computed:{},methods:{settle:function(){var a=[],t=!1;for(var e in this.reply.collect.lists){var o,r=n(this.reply.collect.lists[e]);try{for(r.s();!(o=r.n()).done;){var i=o.value;"model"==i.type&&(i.ea>0&&i.em_check_opt?(a.push({gd_id:i.gd_id,em_id:i.em_id}),t=!0):t=!1),"option"==i.type&&t&&a.push({gd_id:i.gd_id,eo_id:i.eo_id})}}catch(a){r.e(a)}finally{r.f()}}if(!a.length)return Notify.modal("모델을 선택하세요","info"),!1;this.$router.push({name:"order_settle",params:{od_goods:a,od_type:"buy_estimate",od_er_id:this.$route.params.er_id}})},reEstimate:function(){var a=this;return c(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.$refs.observer.validate();case 2:if(!t.sent){t.next=17;break}return t.prev=4,t.next=7,i.Z.post("/api/shop/estimate/reEstimate",a.reply);case 7:(e=t.sent)&&200===e.status?(console.log(e),Notify.toast("success","견적 요청 완료"),a.$router.push({name:"my_estimate"})):Notify.toast("warning",e),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),Notify.consolePrint(t.t0),Notify.toast("warning",t.t0.responsee);case 15:t.next=18;break;case 17:document.getElementById("eq_content").focus();case 18:case"end":return t.stop()}}),t,null,[[4,11]])})))()},print:function(){var a="/api/shop/estimate/printEstimate/".concat(this.$route.params.er_id);window.open(a,"견적서 인쇄","width = 900, height = 900, top = 10, left = 10, location = no")},getValidationState:function(a){var t=a.dirty,e=a.validated,o=a.valid;return t||e?void 0===o?null:o:null},calculator:function(){var a={},t=0,e=0,o=!1;for(var r in this.reply.collect.lists){var i,l=n(this.reply.collect.lists[r]);try{for(l.s();!(i=l.n()).done;){var c=i.value;"model"==c.type&&(c.em_check_opt?(a.hasOwnProperty(r)||(r>0&&"AIR"==c.pa_type?a[r]={goods:0,dlvy:0,air:Number(c.pa_dlvy_p_add_vat)}:a[r]={goods:0,dlvy:Number(c.pa_dlvy_p_add_vat),free_dlvy_max:Number(this.reply.goods.free_dlvy_max),air:0}),a[r].goods+=Number(c.price)*Number(c.ea),t+=c.gain_mileage,o=!0):o=!1),"option"==c.type&&o&&(a[r].goods+=Number(c.price)*Number(c.ea),t+=c.gain_mileage)}}catch(a){l.e(a)}finally{l.f()}}for(var s in this.gd_price=Object.values(a).reduce((function(a,t){return a+t.goods}),0),this.air_price=Object.values(a).reduce((function(a,t){return a+t.air}),0),this.surtax=Number((.1*this.gd_price).toFixed()),a)0==s?a[s].dlvy&&a[s].goods<a[s].free_dlvy_max&&(this.dlvy_4s=Number(a[s].dlvy)):a[s].dlvy&&a[s].goods<a[s].free_dlvy_max&&(e+=Number(a[s].dlvy));this.dlvy_other=e,this.sum_mileage=t,this.all_price=this.gd_price+this.surtax+this.dlvy_4s+this.air_price+e},chkChange:function(){var a=Object.values(this.reply.collect.lists).reduce((function(a,t){return a+t.filter((function(a){return 1==a.em_check_opt})).length}),0);0===a?(this.indeterminate=!1,this.all_chk=!1):a===this.reply.estimate_model.length?(this.indeterminate=!1,this.all_chk=!0):(this.indeterminate=!0,this.all_chk=!1),this.calculator()},toggle_all_chk:function(a){Object.values(this.reply.collect.lists).forEach((function(t){t.forEach((function(t){t.em_check_opt=!!a}))})),this.indeterminate=!1}},mounted:function(){var a=this;return c(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.Z.get("/api/shop/estimate/reply/".concat(a.$route.params.er_id));case 2:(e=t.sent)&&200===e.status&&(a.reply=e.data,a.isLoadingModalViewed=!1,a.calculator());case 4:case"end":return t.stop()}}),t)})))()}};var _=e(93379),v=e.n(_),p=e(23405),f={insert:"head",singleton:!1};v()(p.Z,f);p.Z.locals;const m=(0,e(51900).Z)(d,(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("b-container",{staticClass:"w_fence"},[e("h3",[a._v("견적서 "),e("b",[a._v(a._s(a.reply.er_id))])]),a._v(" "),e("ValidationObserver",{ref:"observer",staticClass:"estimate_show",attrs:{tag:"form"},scopedSlots:a._u([{key:"default",fn:function(t){t.invalid;return[a.isLoadingModalViewed?e("LoadingModal",{attrs:{position:"absolute"},on:{"close-modal":function(t){a.isLoadingModalViewed=!1}}},[a._v("\r\n            Loading ......\r\n        ")]):e("div",[e("b-container",{staticClass:"top"},[e("b-row",[e("b-col",[e("span",[a._v("견적일자")]),a._v(" "),e("b",[a._v(a._s(a._f("formatDate_YYYY_MM_DD")(a.reply.created_at)))])]),a._v(" "),e("b-col",[e("span",[a._v("유효기간")]),a._v(" "),e("b",[a._v(a._s(a._f("formatDate_YYYY_MM_DD")(a.reply.er_effective_at)))])]),a._v(" "),e("b-col",[e("span",[a._v("납품기일")]),a._v(" "),e("b",[a._v(a._s(a.reply.er_dlvy_at))])]),a._v(" "),e("b-col",[e("span",[a._v("담당자/문의")]),a._v(" "+a._s(a.reply.user.name)+"   "+a._s(a.reply.user.tel)+"   "+a._s(a.reply.user.email))])],1)],1),a._v(" "),e("h6",[a._v("상품정보")]),a._v(" "),e("div",{staticClass:"top_border"}),a._v(" "),e("b-container",{staticClass:"pa_list frm_st"},[e("b-row",{staticClass:"lhead"},[e("b-col",[e("b-form-checkbox",{staticClass:"myCheck",attrs:{indeterminate:a.indeterminate},on:{change:a.toggle_all_chk},model:{value:a.all_chk,callback:function(t){a.all_chk=t},expression:"all_chk"}}),a._v("\r\n                        주문 상품\r\n                    ")],1),a._v(" "),e("b-col",[a._v("제조사")]),a._v(" "),e("b-col",[a._v("판매가")]),a._v(" "),e("b-col",[a._v("수량")]),a._v(" "),e("b-col",[a._v("금액")]),a._v(" "),e("b-col",[a._v("배송비")])],1),a._v(" "),a._l(a.reply.collect.lists,(function(t,o){return e("b-row",{key:o,staticClass:"lbody"},[e("b-col",{staticClass:"m_hide"},[a._v(a._s(t[0].pa_name?"업체":"포사이언스")),e("br"),a._v("배송")]),a._v(" "),e("b-col",a._l(t,(function(t,r){return e("b-row",{key:""+o+r,class:{option:"option"==t.type}},["model"==t.type?[e("b-col",[e("b-form-checkbox",{staticClass:"myCheck",on:{change:a.chkChange},model:{value:t.em_check_opt,callback:function(e){a.$set(t,"em_check_opt",e)},expression:"item.em_check_opt"}}),a._v(" "),e("img",{attrs:{src:t.img}})],1),a._v(" "),e("b-col",[e("p",[a._v(a._s(t.gd_name))]),a._v(" "),e("p",[a._v("모델명:"+a._s(t.gm_code)+" / Cat.No.:"+a._s(t.gm_catno))]),a._v(" "),e("p",[a._v("제품명:"+a._s(t.gm_name)+" / 사양:"+a._s(t.gm_spec))]),a._v(" "),e("p",[a._v("판매단위:"+a._s(t.gm_unit))])]),a._v(" "),e("b-col",[a._v(a._s(t.mk_name))]),a._v(" "),e("b-col",[a._v(a._s(a._f("comma")(t.price))+" 원")]),a._v(" "),e("b-col",[a._v(a._s(t.ea)+" 개")]),a._v(" "),e("b-col",[e("div",[a._v("\r\n                                        "+a._s(a._f("comma")(t.price*t.ea))+" 원\r\n                                        "),e("br"),a._v(" "),e("span",[a._v("("+a._s(a._f("comma")(t.gain_mileage*t.ea))+"p 적립)")])])])]:"option"==t.type?[e("b-col",[a._v("추가 옵션")]),a._v(" "),e("b-col",[a._v(a._s(t.goc_name))]),a._v(" "),e("b-col"),a._v(" "),e("b-col",[a._v(a._s(a._f("comma")(t.price))+" 원")]),a._v(" "),e("b-col",[a._v(a._s(t.ea)+" 개")]),a._v(" "),e("b-col",[e("div",[a._v("\r\n                                        "+a._s(a._f("comma")(t.price*t.ea))+" 원\r\n                                        "),e("br"),a._v(" "),e("span",[a._v("("+a._s(a._f("comma")(t.gain_mileage*t.ea))+"p 적립)")])])])]:a._e()],2)})),1),a._v(" "),e("b-col",["AIR"==t[0].pa_type?[a._v("항공운임료")]:[a._v("배송비")],a._v(" "),e("br"),a._v("\r\n                        "+a._s(a._f("comma")(t[0].pa_dlvy_p_add_vat))+" 원\r\n                    ")],2)],1)})),a._v(" "),e("b-row",{staticClass:"total"},[e("b-col",[a._v("상품금액")]),a._v(" "),e("b-col",[e("b",[a._v(a._s(a._f("comma")(a.gd_price+a.surtax)))]),a._v(" 원")]),a._v(" "),e("b-col",[a._v("배송료")]),a._v(" "),e("b-col",[e("b",[a._v(a._s(a._f("comma")(a.dlvy_4s+a.air_price+a.dlvy_other)))]),a._v(" 원")]),a._v(" "),e("b-col",[a._v("결제 예정 금액")]),a._v(" "),e("b-col",[e("b",[a._v(a._s(a._f("comma")(a.all_price)))]),a._v(" 원")])],1),a._v(" "),e("b-row",{staticClass:"total_sub",attrs:{id:"total_sub"}},[e("b-col",[e("div",[e("b-col",[a._v("상품가")]),a._v(" "),e("b-col",[a._v(a._s(a._f("comma")(a.gd_price))+" 원")])],1),a._v(" "),e("div",[e("b-col",[a._v("부가세")]),a._v(" "),e("b-col",[a._v(a._s(a._f("comma")(a.surtax))+" 원")])],1)]),a._v(" "),e("b-col",[e("div",[e("b-col",[a._v("포사이언스 배송")]),a._v(" "),e("b-col",[a._v(a._s(a._f("comma")(a.dlvy_4s))+" 원")])],1),a._v(" "),e("div",[e("b-col",[a._v("업체 배송")]),a._v(" "),e("b-col",[a._v(a._s(a._f("comma")(a.dlvy_other))+" 원")])],1)]),a._v(" "),e("b-col",[e("div",[e("b-col",[a._v("적립예정 마일리지")]),a._v(" "),e("b-col",[a._v(a._s(a._f("comma")(a.sum_mileage))+" 원")])],1)])],1)],2),a._v(" "),e("b-container",{staticClass:"extra"},[e("b-row",[e("b-col",[e("h6",[a._v("추가정보")]),a._v(" "),e("div",a._l(a.reply.file_info,(function(t){return e("b-button",{key:t.fi_id,staticClass:"white mr-2",on:{click:function(e){return a.fileDown(t.down_path,t.fi_original)}}},[e("b-icon",{attrs:{icon:"file-earmark-arrow-down-fill"}}),a._v(" "+a._s(t.fi_original)+"\r\n                            ")],1)})),1),a._v(" "),e("hr"),a._v(" "),e("div",{staticClass:"desc",domProps:{innerHTML:a._s(a.nl2br(a.reply.er_content))}})]),a._v(" "),e("b-col",[e("h6",[e("b",[a._v("재견적 요청")])]),a._v(" "),e("validation-provider",{attrs:{name:"견적 요청 내용",rules:"required|min:1"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("b-form-group",{attrs:{"label-for":"eq_content","label-class":"required"}},[e("b-form-textarea",{attrs:{id:"eq_content",placeholder:"재견적 요청 내용...",rows:"6",state:a.getValidationState(t)},model:{value:a.reply.eq_content,callback:function(t){a.$set(a.reply,"eq_content",t)},expression:"reply.eq_content"}}),a._v(" "),e("b-form-invalid-feedback",[a._v(a._s(t.errors[0]))])],1)]}}])})],1)],1)],1),a._v(" "),e("div",{staticClass:"btn_box"},[e("b-button",{staticClass:"black lg",on:{click:a.print}},[a._v("견적서 출력")]),a._v(" "),e("b-button",{staticClass:"gray lg",on:{click:a.reEstimate}},[a._v("선택상품 재견적 요청")]),a._v(" "),e("b-button",{staticClass:"blue lg",on:{click:a.settle}},[a._v("선택상품 주문하기")])],1)],1)]}}])})],1)}),[],!1,null,"23a9a7ac",null).exports}}]);