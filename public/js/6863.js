"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6863],{5858:(e,t,a)=>{a.d(t,{Z:()=>l});var o=a(23645),r=a.n(o)()((function(e){return e[1]}));r.push([e.id,'.w_fence[data-v-7e8edb90]{padding-left:0;padding-right:0}.w_fence .container[data-v-7e8edb90],.w_fence .container .row[data-v-7e8edb90],.w_fence .container .row .col[data-v-7e8edb90]{margin:0;padding:0}h3[data-v-7e8edb90]{font-size:1.5rem}h3 b[data-v-7e8edb90]{color:#0094ea;font-size:1.3rem}h6[data-v-7e8edb90]{font-size:1.15rem;font-weight:600;margin-top:2rem;padding-left:2rem}.w_fence .top[data-v-7e8edb90]{border-left:1px solid #b7b7b7;border-top:2px solid #4f637b}.w_fence .top .row .col[data-v-7e8edb90]{border-bottom:1px solid #b7b7b7;border-right:1px solid #b7b7b7;padding:1.2rem 0;text-align:center}.w_fence .top .row .col[data-v-7e8edb90]:nth-of-type(4){flex:0 0 40%;max-width:40%}.w_fence .top .row .col span[data-v-7e8edb90]{font-weight:600;margin-right:.7rem}.w_fence .top .row .col b[data-v-7e8edb90]{color:#0094ea}.w_fence .top_border[data-v-7e8edb90]{border-top:3px solid #4f637b}.pa_list[data-v-7e8edb90]{margin-bottom:2.5rem;padding:0}.pa_list .row[data-v-7e8edb90]{border-bottom:1px solid #d6d6d6;margin:0}.pa_list .row .col[data-v-7e8edb90]{color:#666;font-size:.93rem;padding:0}.pa_list .row.lbody .col[data-v-7e8edb90]:not(:nth-of-type(2)){align-items:center;display:flex;justify-content:center;text-align:center}.pa_list .row .col .row[data-v-7e8edb90]:last-child{border-bottom-width:0}.pa_list .row.lbody>.col[data-v-7e8edb90]:first-child{border-right:1px solid #d6d6d6}.pa_list .row.lbody>.col[data-v-7e8edb90]:last-child{border-left:1px solid #d6d6d6}.pa_list .lhead .col[data-v-7e8edb90]{color:#000;font-weight:700;padding:.74rem 0!important;text-align:center}.pa_list .lhead .col[data-v-7e8edb90]:nth-of-type(2){flex-basis:11.2%;max-width:11.2%}.pa_list .lhead .col[data-v-7e8edb90]:nth-of-type(3){flex-basis:8.8%;max-width:8.8%}.pa_list .lhead .col[data-v-7e8edb90]:nth-of-type(4){flex-basis:7.2%;max-width:7.2%}.pa_list .lhead .col[data-v-7e8edb90]:nth-of-type(5){flex-basis:9.6%;max-width:9.6%}.pa_list .lhead .col[data-v-7e8edb90]:nth-of-type(6){flex-basis:10%;max-width:10%}.pa_list .lbody>.col[data-v-7e8edb90]:first-of-type,.pa_list .lbody>.col[data-v-7e8edb90]:nth-of-type(3){color:#000;flex-basis:10%;font-weight:600;max-width:10%}.pa_list .lbody .col .row .col[data-v-7e8edb90]:first-of-type{flex-basis:18%;max-width:18%}.pa_list .lbody .col .row .col[data-v-7e8edb90]:nth-of-type(3){flex-basis:14%;max-width:14%}.pa_list .lbody .col .row .col[data-v-7e8edb90]:nth-of-type(4){flex-basis:11%;justify-content:flex-end;max-width:11%;padding-right:.5rem}.pa_list .lbody .col .row .col[data-v-7e8edb90]:nth-of-type(5){flex-basis:9%;justify-content:flex-end;max-width:9%;padding-right:.5rem}.pa_list .lbody .col .row .col[data-v-7e8edb90]:nth-of-type(6){color:#000;flex-basis:12%;font-weight:600;justify-content:flex-end;max-width:12%;padding-right:.5rem}.pa_list .lbody .col .row .col:nth-of-type(6) span[data-v-7e8edb90]{color:#666;font-size:.7rem}.pa_list .row .col .row.option[data-v-7e8edb90]{background:#f4f1ec}.pa_list .row .col .row .col[data-v-7e8edb90]{padding:.8rem 0}.pa_list .row .col .row .col img[data-v-7e8edb90]{height:119px;-o-object-fit:contain;object-fit:contain;width:119px}.pa_list .row .col .row .col p[data-v-7e8edb90]{margin-bottom:.2rem}.pa_list .row .col .row .col[data-v-7e8edb90]:nth-of-type(2){padding-left:1rem}.pa_list .row .col .row .col:nth-of-type(2) p[data-v-7e8edb90]:first-of-type{color:#000;font-weight:700;margin-bottom:.8rem}.pa_list .row .col[data-v-7e8edb90] .myCheck{display:inline-block;margin:0 .5rem;padding-left:1.3em}.pa_list .row .col[data-v-7e8edb90] .myCheck .custom-control-label:after,.pa_list .row .col[data-v-7e8edb90] .myCheck .custom-control-label:before{height:1.8rem;top:-2px;width:1.8rem}.pa_list .total[data-v-7e8edb90]{border-bottom:1px solid #d6d6d6;border-top:2px solid #363636;margin-top:1.6rem}.pa_list .total .col[data-v-7e8edb90]{color:#000;font-weight:700}.pa_list .total .col[data-v-7e8edb90]:nth-of-type(odd){align-items:center;display:flex;flex-basis:12%;font-size:.9vw;max-width:12%;padding:1vw 0 1vw 2vw}.pa_list .total .col[data-v-7e8edb90]:nth-of-type(2n){padding:1vw 2vw 1vw 0;text-align:right}.pa_list .total .col[data-v-7e8edb90]:nth-of-type(2):after,.pa_list .total .col[data-v-7e8edb90]:nth-of-type(4):after{background:#707070;border-radius:13px;color:#fff;font-size:1.4rem;height:25px;line-height:1.32rem;position:absolute;right:-14px;text-align:center;top:50%;transform:translateY(-50%);width:25px}.pa_list .total .col b[data-v-7e8edb90]{font-size:1.4rem}.pa_list .total .col[data-v-7e8edb90]:nth-of-type(2){border-right:1px solid #d6d6d6}.pa_list .total .col[data-v-7e8edb90]:nth-of-type(2):after{content:"+"}.pa_list .total .col[data-v-7e8edb90]:nth-of-type(4){border-right:1px solid #d6d6d6}.pa_list .total .col[data-v-7e8edb90]:nth-of-type(4):after{content:"="}.pa_list .total .col[data-v-7e8edb90]:nth-of-type(5),.pa_list .total .col[data-v-7e8edb90]:nth-of-type(6){flex-basis:20%;max-width:20%}.pa_list .total_sub[data-v-7e8edb90]{background:#f2f3f5;border-bottom-width:0}.pa_list .total_sub>.col[data-v-7e8edb90]:first-of-type,.pa_list .total_sub>.col[data-v-7e8edb90]:nth-of-type(2){border-right:1px solid #d6d6d6}.pa_list .total_sub>.col[data-v-7e8edb90]:nth-of-type(3){flex-basis:40%;max-width:40%}.pa_list .total_sub .col>div[data-v-7e8edb90]{display:flex;flex-wrap:wrap}.pa_list .total_sub .col>div[data-v-7e8edb90]:first-of-type{padding:1.3rem 3rem .5rem}.pa_list .total_sub .col>div[data-v-7e8edb90]:nth-of-type(2){padding:0 3rem 2.5rem}.pa_list .total_sub .col>div .col[data-v-7e8edb90]{color:#a8a9ab;font-size:.84rem;font-weight:700}.pa_list .total_sub .col>div .col[data-v-7e8edb90]:nth-of-type(2){text-align:right}.w_fence .extra[data-v-7e8edb90]{margin-top:2rem}.w_fence .extra .row .col[data-v-7e8edb90]:first-child{margin-right:2rem}.w_fence .extra .row .col h6[data-v-7e8edb90]{border-bottom:2px solid #707070;margin-bottom:.7rem;padding-bottom:.5rem}.w_fence .extra .row .col h6 b[data-v-7e8edb90]{color:#0094ea}.w_fence .extra .row .col:first-child .desc[data-v-7e8edb90]{border:1px solid #d6d6d6;min-height:calc(3vw + 5rem);padding:1rem}.w_fence .extra .row .col .btn[data-v-7e8edb90]{font-size:.85rem;padding:.3rem}',""]);const l=r},36863:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var o=a(87757),r=a.n(o),l=a(44670);function i(e,t,a,o,r,l,i){try{var n=e[l](i),d=n.value}catch(e){return void a(e)}n.done?t(d):Promise.resolve(d).then(o,r)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(o,r){var l=e.apply(t,a);function n(e){i(l,o,r,n,d,"next",e)}function d(e){i(l,o,r,n,d,"throw",e)}n(void 0)}))}}function d(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){n=!0,l=e},f:function(){try{i||null==a.return||a.return()}finally{if(n)throw l}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}const c={name:"mypageEstimateReplyShow",components:{"loading-modal":function(){return a.e(2008).then(a.bind(a,32008))}},data:function(){return{isLoadingModalViewed:!0,reply:{},gd_price:0,surtax:0,dlvy_4s:0,dlvy_other:0,air_price:0,all_price:0,sum_mileage:0,indeterminate:!1,all_chk:!0}},computed:{},methods:{settle:function(){var e=[],t=!1;for(var a in this.reply.collect.lists){var o,r=d(this.reply.collect.lists[a]);try{for(r.s();!(o=r.n()).done;){var l=o.value;"model"==l.type&&(l.ea>0&&l.em_check_opt?(e.push({gd_id:l.gd_id,em_id:l.em_id}),t=!0):t=!1),"option"==l.type&&t&&e.push({gd_id:l.gd_id,eo_id:l.eo_id})}}catch(e){r.e(e)}finally{r.f()}}if(!e.length)return Notify.modal("모델을 선택하세요","info"),!1;this.$router.push({name:"order_settle",params:{od_goods:e,od_type:"buy_estimate",od_er_id:this.$route.params.er_id}})},reEstimate:function(){var e=this;return n(r().mark((function t(){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.observer.validate();case 2:if(!t.sent){t.next=17;break}return t.prev=4,t.next=7,l.Z.post("/api/shop/estimate/reEstimate",e.reply);case 7:(a=t.sent)&&200===a.status?(console.log(a),Notify.toast("success","견적 요청 완료"),e.$router.push({name:"my_estimate"})):Notify.toast("warning",a),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),Notify.consolePrint(t.t0),Notify.toast("warning",t.t0.responsee);case 15:t.next=18;break;case 17:document.getElementById("eq_content").focus();case 18:case"end":return t.stop()}}),t,null,[[4,11]])})))()},print:function(){var e="/api/shop/estimate/printEstimate/".concat(this.$route.params.er_id);window.open(e,"견적서 인쇄","width = 900, height = 900, top = 10, left = 10, location = no")},getValidationState:function(e){var t=e.dirty,a=e.validated,o=e.valid;return t||a?void 0===o?null:o:null},calculator:function(){var e={},t=0,a=0,o=!1;for(var r in this.reply.collect.lists){var l,i=d(this.reply.collect.lists[r]);try{for(i.s();!(l=i.n()).done;){var n=l.value;"model"==n.type&&(n.em_check_opt?(e.hasOwnProperty(r)||(r>0&&"AIR"==n.pa_type?e[r]={goods:0,dlvy:0,air:Number(n.pa_dlvy_p_add_vat)}:e[r]={goods:0,dlvy:Number(n.pa_dlvy_p_add_vat),free_dlvy_max:Number(this.reply.goods.free_dlvy_max),air:0}),e[r].goods+=Number(n.price)*Number(n.ea),t+=n.price*this.reply.estimate_req.user.mileage_mul*n.ea,o=!0):o=!1),"option"==n.type&&o&&(e[r].goods+=Number(n.price)*Number(n.ea),t+=n.price*this.reply.estimate_req.user.mileage_mul*n.ea)}}catch(e){i.e(e)}finally{i.f()}}for(var s in this.gd_price=Object.values(e).reduce((function(e,t){return e+t.goods}),0),this.air_price=Object.values(e).reduce((function(e,t){return e+t.air}),0),this.surtax=Number((.1*this.gd_price).toFixed()),e)0==s?e[s].dlvy&&e[s].goods<e[s].free_dlvy_max&&(this.dlvy_4s=Number(e[s].dlvy)):e[s].dlvy&&e[s].goods<e[s].free_dlvy_max&&(a+=Number(e[s].dlvy));this.dlvy_other=a,this.sum_mileage=t,this.all_price=this.gd_price+this.surtax+this.dlvy_4s+this.air_price+a},chkChange:function(){var e=Object.values(this.reply.collect.lists).reduce((function(e,t){return e+t.filter((function(e){return 1==e.em_check_opt})).length}),0);0===e?(this.indeterminate=!1,this.all_chk=!1):e===this.reply.estimate_model.length?(this.indeterminate=!1,this.all_chk=!0):(this.indeterminate=!0,this.all_chk=!1),this.calculator()},toggle_all_chk:function(e){Object.values(this.reply.collect.lists).forEach((function(t){t.forEach((function(t){t.em_check_opt=!!e}))})),this.indeterminate=!1}},mounted:function(){var e=this;return n(r().mark((function t(){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Z.get("/api/shop/estimate/reply/".concat(e.$route.params.er_id));case 2:(a=t.sent)&&200===a.status&&(e.reply=a.data,e.isLoadingModalViewed=!1,e.calculator());case 4:case"end":return t.stop()}}),t)})))()}};var _=a(93379),p=a.n(_),v=a(5858),b={insert:"head",singleton:!1};p()(v.Z,b);v.Z.locals;const f=(0,a(51900).Z)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticClass:"w_fence"},[a("h3",[e._v("견적서 "),a("b",[e._v(e._s(e.reply.er_id))])]),e._v(" "),a("validation-observer",{ref:"observer",staticClass:"estimate_show",attrs:{tag:"form"},scopedSlots:e._u([{key:"default",fn:function(t){t.invalid;return[e.isLoadingModalViewed?a("loading-modal",{attrs:{position:"absolute"},on:{"close-modal":function(t){e.isLoadingModalViewed=!1}}},[e._v("Loading ......")]):a("div",[a("b-container",{staticClass:"top"},[a("b-row",[a("b-col",[a("span",[e._v("견적일자")]),e._v(" "),a("b",[e._v(e._s(e._f("formatDate_YYYY_MM_DD")(e.reply.created_at)))])]),e._v(" "),a("b-col",[a("span",[e._v("유효기간")]),e._v(" "),a("b",[e._v(e._s(e._f("formatDate_YYYY_MM_DD")(e.reply.er_effective_at)))])]),e._v(" "),a("b-col",[a("span",[e._v("납품기일")]),e._v(" "),a("b",[e._v(e._s(e.reply.er_dlvy_at))])]),e._v(" "),a("b-col",[a("span",[e._v("담당자/문의")]),e._v(" "+e._s(e.reply.user.name)+"   "+e._s(e.reply.user.tel)+"   "+e._s(e.reply.user.email))])],1)],1),e._v(" "),a("h6",[e._v("상품정보")]),e._v(" "),a("div",{staticClass:"top_border"}),e._v(" "),a("b-container",{staticClass:"pa_list frm_st"},[a("b-row",{staticClass:"lhead"},[a("b-col",[a("b-form-checkbox",{staticClass:"myCheck",attrs:{indeterminate:e.indeterminate},on:{change:e.toggle_all_chk},model:{value:e.all_chk,callback:function(t){e.all_chk=t},expression:"all_chk"}}),e._v("\r\n                        주문 상품\r\n                    ")],1),e._v(" "),a("b-col",[e._v("제조사")]),e._v(" "),a("b-col",[e._v("판매가")]),e._v(" "),a("b-col",[e._v("수량")]),e._v(" "),a("b-col",[e._v("금액")]),e._v(" "),a("b-col",[e._v("배송비")])],1),e._v(" "),e._l(e.reply.collect.lists,(function(t,o){return a("b-row",{key:o,staticClass:"lbody"},[a("b-col",{staticClass:"m_hide"},[e._v(e._s(t[0].pa_name?"업체":"포사이언스")),a("br"),e._v("배송")]),e._v(" "),a("b-col",e._l(t,(function(t,r){return a("b-row",{key:""+o+r,class:{option:"option"==t.type}},["model"==t.type?[a("b-col",[a("b-form-checkbox",{staticClass:"myCheck",on:{change:e.chkChange},model:{value:t.em_check_opt,callback:function(a){e.$set(t,"em_check_opt",a)},expression:"item.em_check_opt"}}),e._v(" "),a("img",{attrs:{src:t.img}})],1),e._v(" "),a("b-col",[a("p",[e._v(e._s(t.gd_name))]),e._v(" "),a("p",[e._v("제품명:"+e._s(t.gm_name)+" / Cat.No.:"+e._s(t.gm_catno))]),e._v(" "),a("p",[e._v("모델명:"+e._s(t.gm_code)+" / 판매단위:"+e._s(t.gm_unit))]),e._v("\r\n                                    사양:"),a("span",{domProps:{innerHTML:e._s(e.nl2br(t.gm_spec))}})]),e._v(" "),a("b-col",[e._v(e._s(t.mk_name))]),e._v(" "),a("b-col",[e._v(e._s(e._f("comma")(t.price))+" 원")]),e._v(" "),a("b-col",[e._v(e._s(t.ea)+" 개")]),e._v(" "),a("b-col",[a("div",[e._v("\r\n                                        "+e._s(e._f("comma")(t.price*t.ea))+" 원\r\n                                        "),a("br"),e._v(" "),a("span",[e._v("("+e._s(e._f("comma")(t.price*e.reply.estimate_req.user.mileage_mul*t.ea))+"p 적립)")])])])]:"option"==t.type?[a("b-col",[e._v("추가 옵션")]),e._v(" "),a("b-col",[e._v(e._s(t.goc_name))]),e._v(" "),a("b-col"),e._v(" "),a("b-col",[e._v(e._s(e._f("comma")(t.price))+" 원")]),e._v(" "),a("b-col",[e._v(e._s(t.ea)+" 개")]),e._v(" "),a("b-col",[a("div",[e._v("\r\n                                        "+e._s(e._f("comma")(t.price*t.ea))+" 원\r\n                                        "),a("br"),e._v(" "),a("span",[e._v("("+e._s(e._f("comma")(t.price*e.reply.estimate_req.user.mileage_mul*t.ea))+"p 적립)")])])])]:e._e()],2)})),1),e._v(" "),a("b-col",["AIR"==t[0].pa_type?[e._v("항공운임료")]:[e._v("배송비")],e._v(" "),a("br"),e._v("\r\n                        "+e._s(e._f("comma")(t[0].pa_dlvy_p_add_vat))+" 원\r\n                    ")],2)],1)})),e._v(" "),a("b-row",{staticClass:"total"},[a("b-col",[e._v("상품금액")]),e._v(" "),a("b-col",[a("b",[e._v(e._s(e._f("comma")(e.gd_price+e.surtax)))]),e._v(" 원")]),e._v(" "),a("b-col",[e._v("배송료")]),e._v(" "),a("b-col",[a("b",[e._v(e._s(e._f("comma")(e.dlvy_4s+e.air_price+e.dlvy_other)))]),e._v(" 원")]),e._v(" "),a("b-col",[e._v("결제 예정 금액")]),e._v(" "),a("b-col",[a("b",[e._v(e._s(e._f("comma")(e.all_price)))]),e._v(" 원")])],1),e._v(" "),a("b-row",{staticClass:"total_sub",attrs:{id:"total_sub"}},[a("b-col",[a("div",[a("b-col",[e._v("상품가")]),e._v(" "),a("b-col",[e._v(e._s(e._f("comma")(e.gd_price))+" 원")])],1),e._v(" "),a("div",[a("b-col",[e._v("부가세")]),e._v(" "),a("b-col",[e._v(e._s(e._f("comma")(e.surtax))+" 원")])],1)]),e._v(" "),a("b-col",[a("div",[a("b-col",[e._v("포사이언스 배송")]),e._v(" "),a("b-col",[e._v(e._s(e._f("comma")(e.dlvy_4s))+" 원")])],1),e._v(" "),a("div",[a("b-col",[e._v("업체 배송")]),e._v(" "),a("b-col",[e._v(e._s(e._f("comma")(e.air_price+e.dlvy_other))+" 원")])],1)]),e._v(" "),a("b-col",[a("div",[a("b-col",[e._v("적립예정 마일리지")]),e._v(" "),a("b-col",[e._v(e._s(e._f("comma")(e.sum_mileage))+" 원")])],1)])],1)],2),e._v(" "),a("b-container",{staticClass:"extra"},[a("b-row",[a("b-col",[a("h6",[e._v("추가정보")]),e._v(" "),a("div",e._l(e.reply.file_info,(function(t){return a("b-button",{key:t.fi_id,staticClass:"white mr-2",on:{click:function(a){return e.fileDown(t.down_path,t.fi_original)}}},[a("b-icon",{attrs:{icon:"file-earmark-arrow-down-fill"}}),e._v(" "+e._s(t.fi_original)+"\r\n                            ")],1)})),1),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"desc",domProps:{innerHTML:e._s(e.nl2br(e.reply.er_content))}})]),e._v(" "),a("b-col",[a("h6",[a("b",[e._v("재견적 요청")])]),e._v(" "),a("validation-provider",{attrs:{name:"견적 요청 내용",rules:"required|min:1"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-form-group",{attrs:{"label-for":"eq_content","label-class":"required"}},[a("b-form-textarea",{attrs:{id:"eq_content",placeholder:"재견적 요청 내용...",rows:"6",state:e.getValidationState(t)},model:{value:e.reply.eq_content,callback:function(t){e.$set(e.reply,"eq_content",t)},expression:"reply.eq_content"}}),e._v(" "),a("b-form-invalid-feedback",[e._v(e._s(t.errors[0]))])],1)]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"btn_box"},[a("b-button",{staticClass:"black lg",on:{click:e.print}},[e._v("견적서 출력")]),e._v(" "),a("b-button",{staticClass:"gray lg",on:{click:e.reEstimate}},[e._v("선택상품 재견적 요청")]),e._v(" "),a("b-button",{staticClass:"blue lg",on:{click:e.settle}},[e._v("선택상품 주문하기")])],1)],1)]}}])})],1)}),[],!1,null,"7e8edb90",null).exports}}]);