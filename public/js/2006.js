"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2006],{56420:(e,t,o)=>{o.d(t,{Z:()=>n});var a=o(23645),r=o.n(a)()((function(e){return e[1]}));r.push([e.id,'.w_fence[data-v-59188146]{padding-left:0;padding-right:0}.w_fence .container[data-v-59188146],.w_fence .container .row[data-v-59188146],.w_fence .container .row .col[data-v-59188146]{margin:0;padding:0}h3[data-v-59188146]{font-size:1.5rem}h3 b[data-v-59188146]{color:#0094ea;font-size:1.3rem}h6[data-v-59188146]{font-size:1.15rem;font-weight:600;margin-top:2rem;padding-left:2rem}.w_fence .top[data-v-59188146]{border-left:1px solid #b7b7b7;border-top:2px solid #4f637b}.w_fence .top .row .col[data-v-59188146]{border-bottom:1px solid #b7b7b7;border-right:1px solid #b7b7b7;padding:1.2rem 0;text-align:center}.w_fence .top .row .col[data-v-59188146]:nth-of-type(4){flex:0 0 40%;max-width:40%}.w_fence .top .row .col span[data-v-59188146]{font-weight:600;margin-right:.7rem}.w_fence .top .row .col b[data-v-59188146]{color:#0094ea}.w_fence .goods[data-v-59188146]{padding-bottom:.5rem}.w_fence .goods .row .col[data-v-59188146]{padding-bottom:.4rem;padding-top:.4rem;text-align:center}.w_fence .goods .row .col.align[data-v-59188146]{align-items:center;display:flex;justify-content:center}.w_fence .goods .row[data-v-59188146]:first-child{background-color:#ececec;border-bottom:1px solid #acacac;border-top:1px solid #acacac}.w_fence .goods .row:first-child .col[data-v-59188146]{font-size:.9rem;font-weight:600;line-height:1.7;padding:.86rem 0}.w_fence .goods .row:not(:first-child) .col[data-v-59188146],.w_fence .goods .row:not(:first-child) .col p[data-v-59188146]{color:#aeaeae;font-size:.85rem}.w_fence .goods .row .col b[data-v-59188146]{color:#000;font-size:.95rem}.w_fence .goods .row .col[data-v-59188146]:first-child{flex:0 0 7%;max-width:7%}.w_fence .goods .row .col[data-v-59188146]:nth-child(2){flex:0 0 9%;max-width:9%}.w_fence .goods .row .col[data-v-59188146]:nth-child(3){align-items:center;display:flex;padding-left:3%;text-align:left}.w_fence .goods .row .col[data-v-59188146]:nth-child(4),.w_fence .goods .row .col[data-v-59188146]:nth-child(5){flex:0 0 10%;max-width:10%}.w_fence .goods .row .col[data-v-59188146]:nth-child(6){color:#000;flex:0 0 10%;font-weight:900;max-width:10%}.w_fence .goods .row .col img[data-v-59188146]{width:100%}.w_fence .goods .row .col p[data-v-59188146]{margin:0}.w_fence .goods .row .col[data-v-59188146] .myCheck .custom-control-label:after,.w_fence .goods .row .col[data-v-59188146] .myCheck .custom-control-label:before{height:1.8rem;top:-2px;width:1.8rem}.w_fence .goods .row .option[data-v-59188146]{display:flex;flex:0 0 100%;max-width:100%}.w_fence .sum_up[data-v-59188146]{border-top:3px solid #4f637b}.w_fence .sum_up .total[data-v-59188146]{border-bottom:1px solid #d6d6d6}.w_fence .sum_up .total .col[data-v-59188146]{color:#000;font-weight:700;padding:1rem .5rem}.w_fence .sum_up .total .col b[data-v-59188146]{font-size:1.4rem}.w_fence .sum_up .total .col[data-v-59188146]:nth-of-type(odd){align-items:center;display:flex;padding-left:2rem}.w_fence .sum_up .total .col[data-v-59188146]:nth-of-type(2n){padding-right:2rem;text-align:right}.w_fence .sum_up .total .col[data-v-59188146]:nth-of-type(2){border-right:1px solid #d6d6d6}.w_fence .sum_up .total .col[data-v-59188146]:nth-of-type(2):after,.w_fence .sum_up .total .col[data-v-59188146]:nth-of-type(4):after{background:#707070;border-radius:13px;color:#fff;font-size:1.4rem;height:25px;line-height:1.2;position:absolute;right:-14px;text-align:center;top:19px;width:25px}.w_fence .sum_up .total .col[data-v-59188146]:nth-of-type(2):after{content:"+"}.w_fence .sum_up .total .col[data-v-59188146]:nth-of-type(4){border-right:1px solid #d6d6d6}.w_fence .sum_up .total .col[data-v-59188146]:nth-of-type(4):after{content:"="}.w_fence .sum_up .total .col[data-v-59188146]:nth-of-type(5),.w_fence .sum_up .total .col[data-v-59188146]:nth-of-type(6){flex-basis:19.5%;max-width:19.5%}.w_fence .sum_up .total_sub[data-v-59188146]{background:#f2f3f5;border-bottom-width:0}.w_fence .sum_up .total_sub>.col[data-v-59188146]:first-of-type,.w_fence .sum_up .total_sub>.col[data-v-59188146]:nth-of-type(2){border-right:1px solid #d6d6d6}.w_fence .sum_up .total_sub>.col[data-v-59188146]:nth-of-type(3){flex-basis:39%;max-width:39%}.w_fence .sum_up .total_sub .col>div[data-v-59188146]{display:flex;flex-wrap:wrap}.w_fence .sum_up .total_sub .col>div[data-v-59188146]:first-of-type{padding:1.3rem 1rem .5rem}.w_fence .sum_up .total_sub .col>div[data-v-59188146]:nth-of-type(2){padding:0 1rem 1.5rem}.w_fence .sum_up .total_sub .col>div .col[data-v-59188146]{color:#a8a9ab;font-size:.84rem;font-weight:700}.w_fence .sum_up .total_sub .col>div .col[data-v-59188146]:nth-of-type(2){text-align:right}.w_fence .extra[data-v-59188146]{margin-top:2rem}.w_fence .extra .row .col[data-v-59188146]:first-child{margin-right:2rem}.w_fence .extra .row .col h6[data-v-59188146]{border-bottom:2px solid #707070;margin-bottom:.7rem;padding-bottom:.5rem}.w_fence .extra .row .col h6 b[data-v-59188146]{color:#0094ea}.w_fence .extra .row .col:first-child .desc[data-v-59188146]{border:1px solid #d6d6d6;padding:1rem}.w_fence .extra .row .col .btn[data-v-59188146]{font-size:.85rem;padding:.3rem}',""]);const n=r},22006:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var a=o(87757),r=o.n(a),n=o(44670);function i(e,t,o,a,r,n,i){try{var c=e[n](i),l=c.value}catch(e){return void o(e)}c.done?t(l):Promise.resolve(l).then(a,r)}function c(e){return function(){var t=this,o=arguments;return new Promise((function(a,r){var n=e.apply(t,o);function c(e){i(n,a,r,c,l,"next",e)}function l(e){i(n,a,r,c,l,"throw",e)}c(void 0)}))}}function l(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,c=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){c=!0,n=e},f:function(){try{i||null==o.return||o.return()}finally{if(c)throw n}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,a=new Array(t);o<t;o++)a[o]=e[o];return a}const _={name:"mypageEstimateReplyShow",components:{LoadingModal:function(){return o.e(7176).then(o.bind(o,17176))}},data:function(){return{isLoadingModalViewed:!0,reply:{},gd_price:0,surtax:0,dlvy_4s:0,dlvy_other:0,air_price:0,all_price:0,sum_mileage:0,indeterminate:!1,all_chk:!1}},computed:{},methods:{settle:function(){var e,t=[],o=l(this.reply.estimate_model);try{for(o.s();!(e=o.n()).done;){var a=e.value;if(a.em_ea>0&&"Y"==a.em_check_opt&&t.push({gd_id:a.em_gd_id,em_id:a.em_id}),a.hasOwnProperty("estimate_option")){var r,n=l(a.estimate_option);try{for(n.s();!(r=n.n()).done;){var i=r.value;i.eo_ea>0&&"Y"==i.eo_check_opt&&t.push({gd_id:i.eo_gd_id,eo_id:i.eo_id})}}catch(e){n.e(e)}finally{n.f()}}}}catch(e){o.e(e)}finally{o.f()}if(!t.length)return Notify.modal("모델을 선택하세요","info"),!1;this.$router.push({name:"order_settle",params:{od_goods:t,od_type:"buy_estimate",od_er_id:this.$route.params.er_id}})},reEstimate:function(){var e=this;return c(r().mark((function t(){var o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.observer.validate();case 2:if(!t.sent){t.next=17;break}return t.prev=4,t.next=7,n.Z.post("/api/shop/estimate/reEstimate",e.reply);case 7:(o=t.sent)&&200===o.status?(console.log(o),Notify.toast("success","견적 요청 완료")):Notify.toast("warning",o),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),Notify.consolePrint(t.t0),Notify.toast("warning",t.t0.responsee);case 15:t.next=18;break;case 17:document.getElementById("eq_content").focus();case 18:case"end":return t.stop()}}),t,null,[[4,11]])})))()},print:function(){var e="/api/shop/estimate/printEstimate/".concat(this.$route.params.er_id);window.open(e,"견적서 인쇄","width = 900, height = 900, top = 10, left = 10, location = no")},calculator:function(){var e,t={},o=0,a=0,r=l(this.reply.estimate_model);try{for(r.s();!(e=r.n()).done;){var n=e.value,i=0;"Y"==n.em_check_opt&&(n.goods&&n.goods.purchase_at&&(i=n.goods.gd_pa_id),t.hasOwnProperty(i)||(i>0&&"AIR"==n.goods.purchase_at.pa_type?t[i]={goods:0,dlvy:0,air:Number(n.goods.purchase_at.pa_price_add_vat)}:t[i]={goods:0,dlvy:Number(n.goods.dlvy_fee_add_vat),free_dlvy_max:Number(n.goods.free_dlvy_max),air:0}),t[i].goods+=Number(n.em_price)*Number(n.em_ea),o+=n.gain_mileage);var c,s=l(n.estimate_option);try{for(s.s();!(c=s.n()).done;){var _=c.value;"Y"==_.eo_check_opt&&(t[i].goods+=Number(_.eo_price)*Number(_.eo_ea),o+=_.gain_mileage)}}catch(e){s.e(e)}finally{s.f()}}}catch(e){r.e(e)}finally{r.f()}for(var d in this.gd_price=Object.values(t).reduce((function(e,t){return e+t.goods}),0),this.air_price=Object.values(t).reduce((function(e,t){return e+t.air}),0),this.surtax=.1*this.gd_price,t)0==d?t[d].dlvy&&t[d].goods<t[d].free_dlvy_max&&(this.dlvy_4s=Number(t[d].dlvy)):t[d].dlvy&&t[d].goods<t[d].free_dlvy_max&&(a+=Number(t[d].dlvy));this.dlvy_other=a,this.sum_mileage=o,this.all_price=this.gd_price+this.surtax+this.dlvy_4s+this.air_price+a},getValidationState:function(e){var t=e.dirty,o=e.validated,a=e.valid;return t||o?void 0===a?null:a:null},chkChange:function(){var e=this.reply.estimate_model.filter((function(e){return 1==e.em_check_opt})).length;0===e?(this.indeterminate=!1,this.allSelected=!1):e===this.ledger.data.length?(this.indeterminate=!1,this.allSelected=!0):(this.indeterminate=!0,this.allSelected=!1),this.calculator()},toggle_all_chk:function(e){this.ledger.data.forEach((function(t){t.chk_cplt=!!e})),this.indeterminate=!1}},mounted:function(){var e=this;return c(r().mark((function t(){var o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.Z.get("/api/shop/estimate/reply/".concat(e.$route.params.er_id));case 2:(o=t.sent)&&200===o.status&&(e.reply=o.data,e.isLoadingModalViewed=!1,e.calculator());case 4:case"end":return t.stop()}}),t)})))()}};var d=o(93379),f=o.n(d),m=o(56420),v={insert:"head",singleton:!1};f()(m.Z,v);m.Z.locals;const u=(0,o(51900).Z)(_,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-container",{staticClass:"w_fence"},[o("h3",[e._v("견적서 "),o("b",[e._v(e._s(e.reply.er_id))])]),e._v(" "),o("ValidationObserver",{ref:"observer",staticClass:"estimate_show",attrs:{tag:"form"},scopedSlots:e._u([{key:"default",fn:function(t){t.invalid;return[e.isLoadingModalViewed?o("LoadingModal",{attrs:{position:"absolute"},on:{"close-modal":function(t){e.isLoadingModalViewed=!1}}},[e._v("\r\n            Loading ......\r\n        ")]):o("div",[o("b-container",{staticClass:"top"},[o("b-row",[o("b-col",[o("span",[e._v("견적일자")]),e._v(" "),o("b",[e._v(e._s(e._f("formatDate_YYYY_MM_DD")(e.reply.created_at)))])]),e._v(" "),o("b-col",[o("span",[e._v("유효기간")]),e._v(" "),o("b",[e._v(e._s(e._f("formatDate_YYYY_MM_DD")(e.reply.er_effective_at)))])]),e._v(" "),o("b-col",[o("span",[e._v("납품기일")]),e._v(" "),o("b",[e._v(e._s(e._f("formatDate_YYYY_MM_DD")(e.reply.er_dlvy_at)))])]),e._v(" "),o("b-col",[o("span",[e._v("담당자/문의")]),e._v(" "+e._s(e.reply.user.name)+"   "+e._s(e.reply.user.tel)+"   "+e._s(e.reply.user.email))])],1)],1),e._v(" "),o("h6",[e._v("상품정보")]),e._v(" "),o("b-container",{staticClass:"goods"},[o("b-row",[o("b-col",[o("b-form-checkbox",{staticClass:"myCheck",attrs:{indeterminate:e.indeterminate},on:{change:e.toggle_all_chk},model:{value:e.all_chk,callback:function(t){e.all_chk=t},expression:"all_chk"}})],1),e._v(" "),o("b-col"),e._v(" "),o("b-col",[e._v("상품명 / 모델명")]),e._v(" "),o("b-col",[e._v("판매가격")]),e._v(" "),o("b-col",[e._v("수량")]),e._v(" "),o("b-col",[e._v("합계")])],1),e._v(" "),e._l(e.reply.estimate_model,(function(t){return o("b-row",{key:t.em_id},[o("b-col",{staticClass:"align"},[o("b-form-checkbox",{staticClass:"myCheck",attrs:{value:"Y","unchecked-value":"N"},on:{change:e.chkChange},model:{value:t.em_check_opt,callback:function(o){e.$set(t,"em_check_opt",o)},expression:"em.em_check_opt"}})],1),e._v(" "),o("b-col",[t.em_gd_id?o("b-link",{attrs:{to:{name:"goods_show",params:{gd_id:t.em_gd_id}}}},[o("img",{staticClass:"img-fluid",attrs:{src:t.goods.image_src_thumb[0]}})]):o("img",{staticClass:"img-fluid",attrs:{src:t.goods.image_src_thumb[0]}})],1),e._v(" "),o("b-col",[t.em_gd_id?o("b-link",{attrs:{to:{name:"goods_show",params:{gd_id:t.em_gd_id}}}},[o("b",[e._v(e._s(t.em_name))]),e._v(" "),o("p",[e._v("\r\n                                모델명: "+e._s(t.em_code)+" / Cat.No.: "+e._s(t.em_catno)),o("br"),e._v("\r\n                                사양: "+e._s(t.em_spec)),o("br"),e._v("\r\n                                판매단위: "+e._s(t.em_unit)+"\r\n                            ")])]):o("div",[e._v("\r\n                            "+e._s(t.em_name)+"\r\n                            "),o("p",[e._v("\r\n                                모델명: "+e._s(t.em_code)+" / Cat.No.: "+e._s(t.em_catno)),o("br"),e._v("\r\n                                사양: "+e._s(t.em_spec)),o("br"),e._v("\r\n                                판매단위: "+e._s(t.em_unit)+"\r\n                            ")])])],1),e._v(" "),o("b-col",{staticClass:"align"},[e._v(e._s(e._f("won")(e._f("comma")(e._f("rrp")(t.em_price)))))]),e._v(" "),o("b-col",{staticClass:"align"},[e._v(e._s(t.em_ea))]),e._v(" "),o("b-col",{staticClass:"align"},[e._v(e._s(e._f("won")(e._f("comma")(e._f("rrp")(t.em_price*t.em_ea)))))]),e._v(" "),t.estimate_option.length?e._l(t.estimate_option,(function(t){return o("b-col",{key:t.eo_id,staticClass:"option"},[o("b-col"),e._v(" "),o("b-col",[e._v("추가 옵션")]),e._v(" "),o("b-col",[e._v(e._s(t.eo_tit)+":"+e._s(t.eo_name))]),e._v(" "),o("b-col",[e._v(e._s(e._f("won")(e._f("comma")(e._f("rrp")(t.eo_price)))))]),e._v(" "),o("b-col",[e._v(e._s(t.eo_ea))]),e._v(" "),o("b-col",[e._v(e._s(e._f("won")(e._f("comma")(e._f("rrp")(t.eo_price*t.eo_ea)))))])],1)})):e._e()],2)}))],2),e._v(" "),o("b-container",{staticClass:"sum_up"},[o("b-row",{staticClass:"total"},[o("b-col",[e._v("견적가")]),e._v(" "),o("b-col",[o("b",[e._v(e._s(e._f("won")(e._f("comma")(e.gd_price+e.surtax))))])]),e._v(" "),o("b-col",[e._v("배송료")]),e._v(" "),o("b-col",[o("b",[e._v(e._s(e._f("won")(e._f("comma")(e.dlvy_4s+e.dlvy_other+e.air_price))))])]),e._v(" "),o("b-col",[e._v("결제 예정 금액")]),e._v(" "),o("b-col",[o("b",[e._v(e._s(e._f("won")(e._f("comma")(e.all_price))))])])],1),e._v(" "),o("b-row",{staticClass:"total_sub"},[o("b-col",[o("div",[o("b-col",[e._v("상품가")]),o("b-col",[e._v(e._s(e._f("won")(e._f("comma")(e.gd_price))))])],1),e._v(" "),o("div",[o("b-col",[e._v("부가세")]),o("b-col",[e._v(e._s(e._f("won")(e._f("comma")(e.surtax))))])],1)]),e._v(" "),o("b-col",[o("div",[o("b-col",[e._v("포사이언스 배송")]),o("b-col",[e._v(e._s(e._f("comma")(e.dlvy_4s)))])],1),e._v(" "),o("div",[o("b-col",[e._v("업체 배송")]),o("b-col",[e._v(e._s(e._f("comma")(e.dlvy_other+e.air_price)))])],1)]),e._v(" "),o("b-col",[o("div",[o("b-col",[e._v("적립예정 마일리지")]),o("b-col",[e._v(e._s(e._f("comma")(e.sum_mileage)))])],1)])],1)],1),e._v(" "),o("b-container",{staticClass:"extra"},[o("b-row",[o("b-col",[o("h6",[e._v("추가정보")]),e._v(" "),o("div",e._l(e.reply.file_info,(function(t){return o("b-button",{key:t.fi_id,staticClass:"white mr-2",on:{click:function(o){return e.fileDown(t.down_path,t.fi_original)}}},[o("b-icon",{attrs:{icon:"file-earmark-arrow-down-fill"}}),e._v(" "+e._s(t.fi_original)+"\r\n                            ")],1)})),1),e._v(" "),o("hr"),e._v(" "),o("div",{staticClass:"desc",domProps:{innerHTML:e._s(e.nl2br(e.reply.er_content))}})]),e._v(" "),o("b-col",[o("h6",[o("b",[e._v("재견적 요청")])]),e._v(" "),o("validation-provider",{attrs:{name:"견적 요청 내용",rules:"required|min:1"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("b-form-group",{attrs:{"label-for":"eq_content","label-class":"required"}},[o("b-form-textarea",{attrs:{id:"eq_content",placeholder:"재견적 요청 내용...",rows:"6",state:e.getValidationState(t)},model:{value:e.reply.eq_content,callback:function(t){e.$set(e.reply,"eq_content",t)},expression:"reply.eq_content"}}),e._v(" "),o("b-form-invalid-feedback",[e._v(e._s(t.errors[0]))])],1)]}}])})],1)],1)],1),e._v(" "),o("div",{staticClass:"btn_box"},[o("b-button",{staticClass:"black lg",on:{click:e.print}},[e._v("견적서 출력")]),e._v(" "),o("b-button",{staticClass:"gray lg",on:{click:e.reEstimate}},[e._v("선택상품 재견적 요청")]),e._v(" "),o("b-button",{staticClass:"blue lg",on:{click:e.settle}},[e._v("선택상품 주문하기")])],1)],1)]}}])})],1)}),[],!1,null,"59188146",null).exports}}]);