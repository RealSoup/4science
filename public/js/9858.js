"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9858],{90566:(t,e,a)=>{a.d(e,{Z:()=>l});var o=a(23645),r=a.n(o)()((function(t){return t[1]}));r.push([t.id,'.w_fence[data-v-095c2649]{padding-left:0;padding-right:0}.w_fence .container[data-v-095c2649],.w_fence .container .row[data-v-095c2649],.w_fence .container .row .col[data-v-095c2649]{margin:0;padding:0}h3[data-v-095c2649]{font-size:1.5rem}h3 b[data-v-095c2649]{color:#0094ea;font-size:1.3rem}h6[data-v-095c2649]{font-size:1.15rem;font-weight:600;margin-top:2rem;padding-left:2rem}.w_fence .top[data-v-095c2649]{border-left:1px solid #b7b7b7;border-top:2px solid #4f637b}.w_fence .top .row .col[data-v-095c2649]{border-bottom:1px solid #b7b7b7;border-right:1px solid #b7b7b7;padding:1.2rem 0;text-align:center}.w_fence .top .row .col[data-v-095c2649]:nth-of-type(4){flex:0 0 40%;max-width:40%}.w_fence .top .row .col span[data-v-095c2649]{font-weight:600;margin-right:.7rem}.w_fence .top .row .col b[data-v-095c2649]{color:#0094ea}.w_fence .top_border[data-v-095c2649]{border-top:3px solid #4f637b}.pa_list[data-v-095c2649]{margin-bottom:2.5rem;padding:0}.pa_list .row[data-v-095c2649]{border-bottom:1px solid #d6d6d6;margin:0}.pa_list .row .col[data-v-095c2649]{color:#666;font-size:.93rem;padding:0}.pa_list .row.lbody .col[data-v-095c2649]:not(:nth-of-type(2)){align-items:center;display:flex;justify-content:center;text-align:center}.pa_list .row .col .row[data-v-095c2649]:last-child{border-bottom-width:0}.pa_list .row.lbody>.col[data-v-095c2649]:first-child{border-right:1px solid #d6d6d6}.pa_list .row.lbody>.col[data-v-095c2649]:last-child{border-left:1px solid #d6d6d6}.pa_list .lhead .col[data-v-095c2649]{color:#000;font-weight:700;padding:.74rem 0!important;text-align:center}.pa_list .lhead .col[data-v-095c2649]:nth-of-type(2){flex-basis:11.2%;max-width:11.2%}.pa_list .lhead .col[data-v-095c2649]:nth-of-type(3){flex-basis:8.8%;max-width:8.8%}.pa_list .lhead .col[data-v-095c2649]:nth-of-type(4){flex-basis:7.2%;max-width:7.2%}.pa_list .lhead .col[data-v-095c2649]:nth-of-type(5){flex-basis:9.6%;max-width:9.6%}.pa_list .lhead .col[data-v-095c2649]:nth-of-type(6){flex-basis:10%;max-width:10%}.pa_list .lbody>.col[data-v-095c2649]:first-of-type,.pa_list .lbody>.col[data-v-095c2649]:nth-of-type(3){color:#000;flex-basis:10%;font-weight:600;max-width:10%}.pa_list .lbody .col .row .col[data-v-095c2649]:first-of-type{flex-basis:18%;max-width:18%}.pa_list .lbody .col .row .col[data-v-095c2649]:nth-of-type(3){flex-basis:14%;max-width:14%}.pa_list .lbody .col .row .col[data-v-095c2649]:nth-of-type(4){flex-basis:11%;justify-content:flex-end;max-width:11%;padding-right:.5rem}.pa_list .lbody .col .row .col[data-v-095c2649]:nth-of-type(5){flex-basis:9%;justify-content:flex-end;max-width:9%;padding-right:.5rem}.pa_list .lbody .col .row .col[data-v-095c2649]:nth-of-type(6){color:#000;flex-basis:12%;font-weight:600;justify-content:flex-end;max-width:12%;padding-right:.5rem}.pa_list .lbody .col .row .col:nth-of-type(6) span[data-v-095c2649]{color:#666;font-size:.7rem}.pa_list .row .col .row.option[data-v-095c2649]{background:#f4f1ec}.pa_list .row .col .row .col[data-v-095c2649]{padding:.8rem 0}.pa_list .row .col .row .col img[data-v-095c2649]{height:119px;-o-object-fit:contain;object-fit:contain;width:119px}.pa_list .row .col .row .col p[data-v-095c2649]{margin-bottom:.2rem}.pa_list .row .col .row .col[data-v-095c2649]:nth-of-type(2){padding-left:1rem}.pa_list .row .col .row .col:nth-of-type(2) p[data-v-095c2649]:first-of-type{color:#000;font-weight:700;margin-bottom:.8rem}.pa_list .row .col[data-v-095c2649] .myCheck{display:inline-block;margin:0 .5rem;padding-left:1.3em}.pa_list .row .col[data-v-095c2649] .myCheck .custom-control-label:after,.pa_list .row .col[data-v-095c2649] .myCheck .custom-control-label:before{height:1.8rem;top:-2px;width:1.8rem}.pa_list .total[data-v-095c2649]{border-bottom:1px solid #d6d6d6;border-top:2px solid #363636;margin-top:1.6rem}.pa_list .total .col[data-v-095c2649]{color:#000;font-weight:700}.pa_list .total .col[data-v-095c2649]:nth-of-type(odd){align-items:center;display:flex;flex-basis:12%;font-size:.9vw;max-width:12%;padding:1vw 0 1vw 2vw}.pa_list .total .col[data-v-095c2649]:nth-of-type(2n){padding:1vw 2vw 1vw 0;text-align:right}.pa_list .total .col[data-v-095c2649]:nth-of-type(2):after,.pa_list .total .col[data-v-095c2649]:nth-of-type(4):after{background:#707070;border-radius:13px;color:#fff;font-size:1.4rem;height:25px;line-height:1.32rem;position:absolute;right:-14px;text-align:center;top:50%;transform:translateY(-50%);width:25px}.pa_list .total .col b[data-v-095c2649]{font-size:1.4rem}.pa_list .total .col[data-v-095c2649]:nth-of-type(2){border-right:1px solid #d6d6d6}.pa_list .total .col[data-v-095c2649]:nth-of-type(2):after{content:"+"}.pa_list .total .col[data-v-095c2649]:nth-of-type(4){border-right:1px solid #d6d6d6}.pa_list .total .col[data-v-095c2649]:nth-of-type(4):after{content:"="}.pa_list .total .col[data-v-095c2649]:nth-of-type(5),.pa_list .total .col[data-v-095c2649]:nth-of-type(6){flex-basis:20%;max-width:20%}.pa_list .total_sub[data-v-095c2649]{background:#f2f3f5;border-bottom-width:0}.pa_list .total_sub>.col[data-v-095c2649]:first-of-type,.pa_list .total_sub>.col[data-v-095c2649]:nth-of-type(2){border-right:1px solid #d6d6d6}.pa_list .total_sub>.col[data-v-095c2649]:nth-of-type(3){flex-basis:40%;max-width:40%}.pa_list .total_sub .col>div[data-v-095c2649]{display:flex;flex-wrap:wrap}.pa_list .total_sub .col>div[data-v-095c2649]:first-of-type{padding:1.3rem 3rem .5rem}.pa_list .total_sub .col>div[data-v-095c2649]:nth-of-type(2){padding:0 3rem 2.5rem}.pa_list .total_sub .col>div .col[data-v-095c2649]{color:#a8a9ab;font-size:.84rem;font-weight:700}.pa_list .total_sub .col>div .col[data-v-095c2649]:nth-of-type(2){text-align:right}.w_fence .extra[data-v-095c2649]{margin-top:2rem}.w_fence .extra .row .col[data-v-095c2649]:first-child{margin-right:2rem}.w_fence .extra .row .col h6[data-v-095c2649]{border-bottom:2px solid #707070;margin-bottom:.7rem;padding-bottom:.5rem}.w_fence .extra .row .col h6 b[data-v-095c2649]{color:#0094ea}.w_fence .extra .row .col:first-child .desc[data-v-095c2649]{border:1px solid #d6d6d6;min-height:calc(3vw + 5rem);padding:1rem}.w_fence .extra .row .col .btn[data-v-095c2649]{font-size:.85rem;padding:.3rem}',""]);const l=r},59858:(t,e,a)=>{a.r(e),a.d(e,{default:()=>m});var o=a(87757),r=a.n(o),l=a(44670);function i(t,e,a,o,r,l,i){try{var c=t[l](i),n=c.value}catch(t){return void a(t)}c.done?e(n):Promise.resolve(n).then(o,r)}function c(t){return function(){var e=this,a=arguments;return new Promise((function(o,r){var l=t.apply(e,a);function c(t){i(l,o,r,c,n,"next",t)}function n(t){i(l,o,r,c,n,"throw",t)}c(void 0)}))}}function n(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,c=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){c=!0,l=t},f:function(){try{i||null==a.return||a.return()}finally{if(c)throw l}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,o=new Array(e);a<e;a++)o[a]=t[a];return o}const d={name:"mypageEstimateReplyShow",components:{"loading-modal":function(){return a.e(2008).then(a.bind(a,32008))}},data:function(){return{isLoadingModalViewed:!0,reply:{},gd_price:0,surtax:0,dlvy_4s:0,dlvy_other:0,air_price:0,all_price:0,sum_mileage:0,indeterminate:!1,all_chk:!0}},computed:{},methods:{settle:function(){var t=[],e=!1;for(var a in this.reply.collect.lists){var o,r=n(this.reply.collect.lists[a]);try{for(r.s();!(o=r.n()).done;){var l=o.value;"model"==l.type&&(l.ea>0&&l.em_check_opt?(t.push({gd_id:l.gd_id,em_id:l.em_id}),e=!0):e=!1),"option"==l.type&&e&&t.push({gd_id:l.gd_id,eo_id:l.eo_id})}}catch(t){r.e(t)}finally{r.f()}}if(!t.length)return Notify.modal("모델을 선택하세요","info"),!1;this.$router.push({name:"order_settle",params:{od_goods:t,od_type:"buy_estimate",od_er_id:this.$route.params.er_id}})},reEstimate:function(){var t=this;return c(r().mark((function e(){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.observer.validate();case 2:if(!e.sent){e.next=17;break}return e.prev=4,e.next=7,l.Z.post("/api/shop/estimate/reEstimate",t.reply);case 7:(a=e.sent)&&200===a.status?(Notify.toast("success","견적 요청 완료"),t.$router.push({name:"my_estimate"})):Notify.toast("warning",a),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),Notify.consolePrint(e.t0),Notify.toast("warning",e.t0.responsee);case 15:e.next=18;break;case 17:document.getElementById("eq_content").focus();case 18:case"end":return e.stop()}}),e,null,[[4,11]])})))()},print:function(){var t="/api/shop/estimate/printEstimate/".concat(this.$route.params.er_id);window.open(t,"견적서 인쇄","width = 900, height = 900, top = 10, left = 10, location = no")},getValidationState:function(t){var e=t.dirty,a=t.validated,o=t.valid;return e||a?void 0===o?null:o:null},calculator:function(){var t={},e=0,a=0,o=!1;for(var r in this.reply.collect.lists){var l,i=n(this.reply.collect.lists[r]);try{for(i.s();!(l=i.n()).done;){var c=l.value;"model"==c.type&&(c.em_check_opt?(t.hasOwnProperty(r)||(r>0&&"AIR"==c.pa_type?t[r]={goods:0,dlvy:0,air:Number(c.pa_dlvy_p_add_vat)}:t[r]={goods:0,dlvy:Number(c.pa_dlvy_p_add_vat),free_dlvy_max:Number(this.reply.goods.free_dlvy_max),air:0}),t[r].goods+=Number(c.price)*Number(c.ea),e+=c.price*this.reply.estimate_req.user.mileage_mul*c.ea,o=!0):o=!1),"option"==c.type&&o&&(t[r].goods+=Number(c.price)*Number(c.ea),e+=c.price*this.reply.estimate_req.user.mileage_mul*c.ea)}}catch(t){i.e(t)}finally{i.f()}}for(var s in this.gd_price=Object.values(t).reduce((function(t,e){return t+e.goods}),0),this.air_price=Object.values(t).reduce((function(t,e){return t+e.air}),0),this.surtax=Math.floor(.1*this.gd_price),t)0==s?t[s].dlvy&&t[s].goods<t[s].free_dlvy_max&&(this.dlvy_4s=Number(t[s].dlvy)):t[s].dlvy&&t[s].goods<t[s].free_dlvy_max&&(a+=Number(t[s].dlvy));this.dlvy_other=a,this.sum_mileage=e,this.all_price=this.gd_price+this.surtax+this.dlvy_4s+this.air_price+a},chkChange:function(){var t=Object.values(this.reply.collect.lists).reduce((function(t,e){return t+e.filter((function(t){return 1==t.em_check_opt})).length}),0);0===t?(this.indeterminate=!1,this.all_chk=!1):t===this.reply.estimate_model.length?(this.indeterminate=!1,this.all_chk=!0):(this.indeterminate=!0,this.all_chk=!1),this.calculator()},toggle_all_chk:function(t){Object.values(this.reply.collect.lists).forEach((function(e){e.forEach((function(e){e.em_check_opt=!!t}))})),this.indeterminate=!1}},mounted:function(){var t=this;return c(r().mark((function e(){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.get("/api/shop/estimate/reply/".concat(t.$route.params.er_id));case 2:(a=e.sent)&&200===a.status&&(t.reply=a.data,t.isLoadingModalViewed=!1,t.calculator());case 4:case"end":return e.stop()}}),e)})))()}};var _=a(93379),p=a.n(_),v=a(90566),f={insert:"head",singleton:!1};p()(v.Z,f);v.Z.locals;const m=(0,a(51900).Z)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"w_fence"},[a("h3",[t._v("견적서 "),a("b",[t._v(t._s(t.reply.er_id))])]),t._v(" "),a("validation-observer",{ref:"observer",staticClass:"estimate_show",attrs:{tag:"form"},scopedSlots:t._u([{key:"default",fn:function(e){e.invalid;return[t.isLoadingModalViewed?a("loading-modal",{attrs:{position:"absolute"},on:{"close-modal":function(e){t.isLoadingModalViewed=!1}}},[t._v("Loading ......")]):a("div",[a("b-container",{staticClass:"top"},[a("b-row",[a("b-col",[a("span",[t._v("견적일자")]),t._v(" "),a("b",[t._v(t._s(t._f("formatDate_YYYY_MM_DD")(t.reply.created_at)))])]),t._v(" "),a("b-col",[a("span",[t._v("유효기간")]),t._v(" "),a("b",[t._v(t._s(t._f("formatDate_YYYY_MM_DD")(t.reply.er_effective_at)))])]),t._v(" "),a("b-col",[a("span",[t._v("납품기일")]),t._v(" "),a("b",[t._v(t._s(t.reply.er_dlvy_at))])]),t._v(" "),a("b-col",[a("span",[t._v("담당자/문의")]),t._v(" "+t._s(t.reply.estimate_req.mng.name)+"   "+t._s(t.reply.estimate_req.mng.tel)+"   "+t._s(t.reply.estimate_req.mng.email))])],1)],1),t._v(" "),a("h6",[t._v("상품정보")]),t._v(" "),a("div",{staticClass:"top_border"}),t._v(" "),a("b-container",{staticClass:"pa_list frm_st"},[a("b-row",{staticClass:"lhead"},[a("b-col",[a("b-form-checkbox",{staticClass:"myCheck",attrs:{indeterminate:t.indeterminate},on:{change:t.toggle_all_chk},model:{value:t.all_chk,callback:function(e){t.all_chk=e},expression:"all_chk"}}),t._v("\r\n                        주문 상품\r\n                    ")],1),t._v(" "),a("b-col",[t._v("제조사")]),t._v(" "),a("b-col",[t._v("판매가")]),t._v(" "),a("b-col",[t._v("수량")]),t._v(" "),a("b-col",[t._v("금액")]),t._v(" "),a("b-col",[t._v("배송비")])],1),t._v(" "),t._l(t.reply.collect.lists,(function(e,o){return a("b-row",{key:o,staticClass:"lbody"},[a("b-col",{staticClass:"m_hide"},[t._v(t._s(e[0].pa_name?"업체":"포사이언스")),a("br"),t._v("배송")]),t._v(" "),a("b-col",t._l(e,(function(e,r){return a("b-row",{key:""+o+r,class:{option:"option"==e.type}},["model"==e.type?[a("b-col",[a("b-form-checkbox",{staticClass:"myCheck",on:{change:t.chkChange},model:{value:e.em_check_opt,callback:function(a){t.$set(e,"em_check_opt",a)},expression:"item.em_check_opt"}}),t._v(" "),a("img",{attrs:{src:e.img}})],1),t._v(" "),a("b-col",[a("p",[t._v(t._s(e.gd_name))]),t._v(" "),a("p",[t._v("제품명:"+t._s(e.gm_name)+" / Cat.No.:"+t._s(e.gm_catno))]),t._v(" "),a("p",[t._v("모델명:"+t._s(e.gm_code)+" / 판매단위:"+t._s(e.gm_unit))]),t._v("\r\n                                    사양:"),a("span",{domProps:{innerHTML:t._s(t.nl2br(e.gm_spec))}})]),t._v(" "),a("b-col",[t._v(t._s(e.mk_name))]),t._v(" "),a("b-col",[t._v(t._s(t._f("comma")(e.price))+" 원")]),t._v(" "),a("b-col",[t._v(t._s(e.ea)+" 개")]),t._v(" "),a("b-col",[a("div",[t._v("\r\n                                        "+t._s(t._f("comma")(e.price*e.ea))+" 원\r\n                                        "),a("br"),t._v(" "),a("span",[t._v("("+t._s(t._f("comma")(e.price*t.reply.estimate_req.user.mileage_mul*e.ea))+"p 적립)")])])])]:"option"==e.type?[a("b-col",[t._v("추가 옵션")]),t._v(" "),a("b-col",[t._v(t._s(e.goc_name))]),t._v(" "),a("b-col"),t._v(" "),a("b-col",[t._v(t._s(t._f("comma")(e.price))+" 원")]),t._v(" "),a("b-col",[t._v(t._s(e.ea)+" 개")]),t._v(" "),a("b-col",[a("div",[t._v("\r\n                                        "+t._s(t._f("comma")(e.price*e.ea))+" 원\r\n                                        "),a("br"),t._v(" "),a("span",[t._v("("+t._s(t._f("comma")(e.price*t.reply.estimate_req.user.mileage_mul*e.ea))+"p 적립)")])])])]:t._e()],2)})),1),t._v(" "),a("b-col",["AIR"==e[0].pa_type?[t._v("항공운임료")]:[t._v("배송비")],t._v(" "),a("br"),t._v("\r\n                        "+t._s(t._f("comma")(e[0].pa_dlvy_p_add_vat))+" 원\r\n                    ")],2)],1)})),t._v(" "),a("b-row",{staticClass:"total"},[a("b-col",[t._v("상품금액")]),t._v(" "),a("b-col",[a("b",[t._v(t._s(t._f("comma")(t.gd_price+t.surtax)))]),t._v(" 원")]),t._v(" "),a("b-col",[t._v("배송료")]),t._v(" "),a("b-col",[a("b",[t._v(t._s(t._f("comma")(t.dlvy_4s+t.air_price+t.dlvy_other)))]),t._v(" 원")]),t._v(" "),a("b-col",[t._v("결제 예정 금액")]),t._v(" "),a("b-col",[a("b",[t._v(t._s(t._f("comma")(t.all_price)))]),t._v(" 원")])],1),t._v(" "),a("b-row",{staticClass:"total_sub",attrs:{id:"total_sub"}},[a("b-col",[a("div",[a("b-col",[t._v("상품가")]),t._v(" "),a("b-col",[t._v(t._s(t._f("comma")(t.gd_price))+" 원")])],1),t._v(" "),a("div",[a("b-col",[t._v("부가세")]),t._v(" "),a("b-col",[t._v(t._s(t._f("comma")(t.surtax))+" 원")])],1)]),t._v(" "),a("b-col",[a("div",[a("b-col",[t._v("포사이언스 배송")]),t._v(" "),a("b-col",[t._v(t._s(t._f("comma")(t.dlvy_4s))+" 원")])],1),t._v(" "),a("div",[a("b-col",[t._v("업체 배송")]),t._v(" "),a("b-col",[t._v(t._s(t._f("comma")(t.air_price+t.dlvy_other))+" 원")])],1)]),t._v(" "),a("b-col",[a("div",[a("b-col",[t._v("적립예정 마일리지")]),t._v(" "),a("b-col",[t._v(t._s(t._f("comma")(t.sum_mileage))+" 원")])],1)])],1)],2),t._v(" "),a("b-container",{staticClass:"extra"},[a("b-row",[a("b-col",[a("h6",[t._v("추가정보")]),t._v(" "),a("div",t._l(t.reply.file_info,(function(e){return a("b-button",{key:e.fi_id,staticClass:"white mr-2",on:{click:function(a){return t.fileDown(e.down_path,e.fi_original)}}},[a("b-icon",{attrs:{icon:"file-earmark-arrow-down-fill"}}),t._v(" "+t._s(e.fi_original)+"\r\n                            ")],1)})),1),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.nl2br(t.reply.er_content))}})]),t._v(" "),a("b-col",[a("h6",[a("b",[t._v("재견적 요청")])]),t._v(" "),a("validation-provider",{attrs:{name:"견적 요청 내용",rules:"required|min:1"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-form-group",{attrs:{"label-for":"eq_content","label-class":"required"}},[a("b-form-textarea",{attrs:{id:"eq_content",placeholder:"재견적 요청 내용...",rows:"6",state:t.getValidationState(e)},model:{value:t.reply.eq_content,callback:function(e){t.$set(t.reply,"eq_content",e)},expression:"reply.eq_content"}}),t._v(" "),a("b-form-invalid-feedback",[t._v(t._s(e.errors[0]))])],1)]}}])})],1)],1)],1),t._v(" "),a("div",{staticClass:"btn_box"},[a("b-button",{staticClass:"black lg",on:{click:t.print}},[t._v("견적서 출력")]),t._v(" "),a("b-button",{staticClass:"gray lg",on:{click:t.reEstimate}},[t._v("선택상품 재견적 요청")]),t._v(" "),a("b-button",{staticClass:"blue lg",on:{click:t.settle}},[t._v("선택상품 주문하기")])],1)],1)]}}])})],1)}),[],!1,null,"095c2649",null).exports}}]);