"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3116],{7774:(t,e,o)=>{o.d(e,{Z:()=>c});var a=o(3645),r=o.n(a)()((function(t){return t[1]}));r.push([t.id,".estimate_show .goods>.row[data-v-49f4b051]{border-bottom:1px solid #ddd;margin-bottom:1rem;padding-bottom:1rem}.estimate_show .goods>.row>div img[data-v-49f4b051]{height:100px;-o-object-fit:cover;object-fit:cover;width:100px}.estimate_show .goods>.row>div:nth-child(2) .btn[data-v-49f4b051]{text-align:left}.estimate_show .goods>.row>div[data-v-49f4b051]:nth-child(3){text-align:right}.estimate_show .goods>.row>div:nth-child(3) .md_multi[data-v-49f4b051]{display:inline-block;min-width:120px}.estimate_show .price .row div[data-v-49f4b051]{text-align:right}.estimate_show .price .row div b[data-v-49f4b051]{display:inline-block;min-width:200px}.estimate_show .container[data-v-49f4b051]{margin-bottom:2rem}.custom-control.image-checkbox[data-v-49f4b051]{padding-left:0;position:relative}.custom-control.image-checkbox .custom-control-input:checked~.custom-control-label[data-v-49f4b051]:after,.custom-control.image-checkbox .custom-control-input:checked~.custom-control-label[data-v-49f4b051]:before{opacity:1}.custom-control-input:checked~.custom-control-label[data-v-49f4b051]:before{background-color:#007bff;border-color:#007bff;color:#fff}.custom-control.image-checkbox label[data-v-49f4b051]:after,.custom-control.image-checkbox label[data-v-49f4b051]:before{left:.25rem;opacity:0;transition:opacity .3s ease}.custom-control.image-checkbox label[data-v-49f4b051]:focus,.custom-control.image-checkbox label[data-v-49f4b051]:hover{opacity:.8}.custom-control.image-checkbox label img[data-v-49f4b051]{border-radius:2.5px}.custom-control-label[data-v-49f4b051]:after,.custom-control-label[data-v-49f4b051]:before{height:1.5rem;width:1.5rem}",""]);const c=r},3116:(t,e,o)=>{o.r(e),o.d(e,{default:()=>p});var a=o(7757),r=o.n(a),c=o(4670);function s(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(t,e)}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,i=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return s=t.done,t},e:function(t){i=!0,c=t},f:function(){try{s||null==o.return||o.return()}finally{if(i)throw c}}}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,a=new Array(e);o<e;o++)a[o]=t[o];return a}function i(t,e,o,a,r,c,s){try{var n=t[c](s),i=n.value}catch(t){return void o(t)}n.done?e(i):Promise.resolve(i).then(a,r)}function l(t){return function(){var e=this,o=arguments;return new Promise((function(a,r){var c=t.apply(e,o);function s(t){i(c,a,r,s,n,"next",t)}function n(t){i(c,a,r,s,n,"throw",t)}s(void 0)}))}}const _={name:"MyOrder",components:{LoadingModal:function(){return o.e(2891).then(o.bind(o,2891))}},data:function(){return{isLoadingModalViewed:!0,reply:{},gd_price:0,surtax:0,dlvy_price:0,air_price:0,all_price:0}},methods:{show:function(){var t=this;return l(r().mark((function e(){var o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("/api/shop/estimate/reply/".concat(t.$route.params.er_id));case 3:(o=e.sent)&&200===o.status&&(t.reply=o.data,t.gd_price=o.data.er_gd_price,t.surtax=o.data.er_surtax,t.dlvy_price=o.data.er_dlvy_price,t.air_price=o.data.er_air_price,t.all_price=o.data.er_all_price,t.isLoadingModalViewed=!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),Notify.consolePrint(e.t0),Notify.toast("warning",e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},settle:function(){var t,e=[],o=s(this.reply.estimate_model);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.em_ea>0&&"Y"==a.em_check_opt&&e.push({gd_id:a.em_gd_id,em_id:a.em_id}),a.hasOwnProperty("estimate_option")){var r,c=s(a.estimate_option);try{for(c.s();!(r=c.n()).done;){var n=r.value;n.eo_ea>0&&"Y"==n.eo_check_opt&&e.push({gd_id:n.eo_gd_id,eo_id:n.eo_id})}}catch(t){c.e(t)}finally{c.f()}}}}catch(t){o.e(t)}finally{o.f()}if(!e.length)return Notify.modal("모델을 선택하세요"),!1;this.$router.push({name:"order_settle",params:{od_goods:e,od_type:"buy_estimate"}})},reEstimate:function(){var t=this;return l(r().mark((function e(){var o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.observer.validate();case 2:if(!e.sent){e.next=17;break}return e.prev=4,e.next=7,c.Z.post("/api/shop/estimate/reEstimate",t.reply);case 7:(o=e.sent)&&200===o.status?(console.log(o),Notify.toast("success","견적 요청 완료")):Notify.toast("warning",o),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),Notify.consolePrint(e.t0),Notify.toast("warning",e.t0.responsee);case 15:e.next=18;break;case 17:document.getElementById("eq_content").focus();case 18:case"end":return e.stop()}}),e,null,[[4,11]])})))()},print:function(){var t="/api/shop/estimate/printEstimate/".concat(this.$route.params.er_id);window.open(t,"견적서 인쇄","width = 900, height = 900, top = 10, left = 10, location = no")},calculator:function(){var t=priceCalculator(this.reply.estimate_model);this.gd_price=t.gd_price,this.surtax=t.surtax,this.dlvy_price=t.dlvy_price,this.air_price=t.air_price,this.all_price=t.all_price},getValidationState:function(t){var e=t.dirty,o=t.validated,a=t.valid;return e||o?void 0===a?null:a:null}},mounted:function(){this.show()}};var d=o(3379),v=o.n(d),u=o(7774),m={insert:"head",singleton:!1};v()(u.Z,m);u.Z.locals;const p=(0,o(1900).Z)(_,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ValidationObserver",{ref:"observer",staticClass:"estimate_show",attrs:{tag:"form"},scopedSlots:t._u([{key:"default",fn:function(e){e.invalid;return[o("div",{staticClass:"pTitle"},[o("span",[o("i",[t._v("견")])]),t._v(" "),o("span",[o("i",[t._v("적")])]),t._v(" "),o("span",[o("i",[t._v("서")])]),t._v(" "),o("div",{staticClass:"break d-md-block d-none"}),t._v(" "),o("span",[o("i",[t._v("조")])]),t._v(" "),o("span",[o("i",[t._v("회")])]),t._v(" "),o("div",{staticClass:"break"}),t._v(" "),o("span",[o("i")])]),t._v(" "),t.isLoadingModalViewed?o("LoadingModal",{attrs:{position:"absolute"},on:{"close-modal":function(e){t.isLoadingModalViewed=!1}}},[t._v("\n        Loading ......\n    ")]):o("div",[o("b-card",{staticClass:"shadow sticky-top my-4",attrs:{"body-class":"p-2"}},[o("b-row",{staticClass:"sticky-top"},[o("b-col",[o("b-button",{attrs:{variant:"light"}},[t._v("목록")])],1),t._v(" "),o("b-col",{staticClass:"text-right"},[o("b-button-group",[o("b-button",{attrs:{variant:"dark"},on:{click:t.print}},[t._v("견적서 출력")]),t._v(" "),o("b-button",{attrs:{variant:"warning"},on:{click:t.reEstimate}},[t._v("선택상품 재견적 요청")]),t._v(" "),o("b-button",{attrs:{variant:"success"},on:{click:t.settle}},[t._v("선택상품 주문하기")])],1)],1)],1)],1),t._v(" "),o("b-container",{staticClass:"detail"},[o("b-row",[o("b-col",[o("b-row",[o("b-col",{attrs:{cols:"2"}},[t._v("견적번호 :")]),t._v(" "),o("b-col",[t._v(t._s(t.reply.er_id))]),t._v(" "),o("b-col",{attrs:{cols:"2"}},[t._v("견적일자 :")]),t._v(" "),o("b-col",[t._v(t._s(t._f("formatDate_YYYY_MM_DD")(t.reply.created_at)))]),t._v(" "),o("b-col",{attrs:{cols:"2"}},[t._v("납품기일 :")]),t._v(" "),o("b-col",[t._v(t._s(t.reply.er_dlvy_at))])],1),t._v(" "),o("b-row",[o("b-col",{attrs:{cols:"2"}},[t._v("유효기간 :")]),t._v(" "),o("b-col",[t._v(t._s(t.reply.er_effective_at))]),t._v(" "),o("b-col",{attrs:{cols:"2"}},[t._v("담당자 / 문의 :")]),t._v(" "),o("b-col",[t._v("\n                            "+t._s(t.reply.user.name)),o("br"),t._v("\n                            "+t._s(t.reply.user.tel)),o("br"),t._v("\n                            "+t._s(t.reply.user.email)+"\n                        ")])],1)],1)],1)],1),t._v(" "),o("b-container",{staticClass:"goods"},t._l(t.reply.estimate_model,(function(e,a){return o("b-row",{key:e.em_id},[o("b-col",{attrs:{cols:"2"}},[o("div",{staticClass:"custom-control custom-checkbox image-checkbox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.em_check_opt,expression:"em.em_check_opt"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"ck"+e.em_id,"true-value":"Y","false-value":"N"},domProps:{checked:Array.isArray(e.em_check_opt)?t._i(e.em_check_opt,null)>-1:t._q(e.em_check_opt,"Y")},on:{change:[function(o){var a=e.em_check_opt,r=o.target,c=r.checked?"Y":"N";if(Array.isArray(a)){var s=t._i(a,null);r.checked?s<0&&t.$set(e,"em_check_opt",a.concat([null])):s>-1&&t.$set(e,"em_check_opt",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(e,"em_check_opt",c)},t.calculator]}}),t._v(" "),o("label",{staticClass:"custom-control-label",attrs:{for:"ck"+e.em_id}},[o("img",{staticClass:"img-fluid",attrs:{src:e.goods.image_src_thumb[0]}})])])]),t._v(" "),o("b-col",[e.em_gd_id?o("b-button",{attrs:{variant:"outline-secondary",block:"",to:{name:"goods_show",params:{gd_id:e.em_gd_id}}}},[t._v("\n                        "+t._s(e.em_name)+"\n                        "),o("P",{staticClass:"bg-light"},[t._v("\n                            "+t._s(e.em_catno)+" /\n                            "+t._s(e.em_code)+" /\n                            "+t._s(e.em_spec)+" /\n                            "+t._s(e.em_unit)+" /\n                        ")])],1):o("div",[t._v("\n                        "+t._s(e.em_name)+"\n                        "),o("P",{staticClass:"bg-light"},[t._v(" "+t._s(e.em_catno)+" / "+t._s(e.em_code)+" / "+t._s(e.em_spec)+" / "+t._s(e.em_unit)+" / ")])],1)],1),t._v(" "),o("b-col",[t._v("\n                    "+t._s(t._f("rrp")(e.em_price))+" 원\n                    "),o("font-awesome-icon",{attrs:{icon:"times"}}),t._v("\n                    "+t._s(e.em_ea)+" 개\n                    "),o("font-awesome-icon",{attrs:{icon:"equals"}}),t._v(" "),o("b",{staticClass:"md_multi"},[t._v(t._s(t._f("rrp")(e.em_price*e.em_ea))+" 원")])],1),t._v(" "),e.estimate_option.length?o("b-col",{staticClass:"row m-3 p-0",attrs:{cols:"12"}},[o("b-col",{staticClass:"text-right",attrs:{offset:"5",cols:"1"}},[o("b-badge",{staticClass:"float-left clear-both",attrs:{variant:"warning"}},[t._v("옵션")])],1),t._v(" "),o("b-col",t._l(e.estimate_option,(function(e,a){return o("b-row",{key:e.eo_id,staticClass:"text-right"},[o("b-col",[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.eo_check_opt,expression:"option.eo_check_opt"}],attrs:{type:"checkbox","true-value":"Y","false-value":"N"},domProps:{checked:Array.isArray(e.eo_check_opt)?t._i(e.eo_check_opt,null)>-1:t._q(e.eo_check_opt,"Y")},on:{change:[function(o){var a=e.eo_check_opt,r=o.target,c=r.checked?"Y":"N";if(Array.isArray(a)){var s=t._i(a,null);r.checked?s<0&&t.$set(e,"eo_check_opt",a.concat([null])):s>-1&&t.$set(e,"eo_check_opt",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(e,"eo_check_opt",c)},t.calculator]}}),t._v(" "),o("span",[t._v(t._s(e.eo_tit)+": "),o("b",[t._v(t._s(e.eo_name))])]),t._v(" "),o("i",[t._v("수량: "),o("b",[t._v(t._s(e.eo_ea))]),t._v(" 개")])])]),t._v(" "),o("b-col",[t._v("\n                                "+t._s(t._f("rrp")(e.eo_price))+" 원\n                                "),o("font-awesome-icon",{attrs:{icon:"times"}}),t._v("\n                                "+t._s(e.eo_ea)+" 개\n                                "),o("font-awesome-icon",{attrs:{icon:"equals"}}),t._v(" "),o("b",{staticClass:"md_multi"},[t._v(t._s(t._f("rrp")(e.eo_price*e.eo_ea))+" 원")])],1)],1)})),1)],1):t._e()],1)})),1),t._v(" "),o("b-container",{staticClass:"price"},[o("b-row",[o("b-col",{attrs:{cols:"12"}},[t._v("총합 : "),o("b",[t._v(t._s(t._f("comma")(t.gd_price))+" 원")])]),t._v(" "),o("b-col",{attrs:{cols:"12"}},[t._v("부가세 : "),o("b",[t._v(t._s(t._f("comma")(t.surtax))+" 원")])]),t._v(" "),o("b-col",{attrs:{cols:"12"}},[t._v("배송료 : "),o("b",[t._v(t._s(t._f("comma")(t.dlvy_price))+" 원")])]),t._v(" "),t.air_price?o("b-col",{attrs:{cols:"12"}},[t._v("항공운임료: "),o("b",[t._v(t._s(t._f("comma")(t.air_price))+" 원")])]):t._e(),t._v(" "),o("b-col",{attrs:{cols:"12"}},[t._v("최종 결제 금액 : "),o("b",[t._v(t._s(t._f("comma")(t.all_price))+" 원")])])],1)],1),t._v(" "),o("b-container",[o("b-row",[o("b-col",{attrs:{cols:"2"}},[t._v("추가정보 :")]),t._v(" "),o("b-col",{domProps:{innerHTML:t._s(t.reply.er_content)}})],1)],1),t._v(" "),o("b-container",[o("b-row",[o("b-col",[o("validation-provider",{attrs:{name:"견적 요청 내용",rules:"required|min:1"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("b-form-group",{attrs:{label:"재견적 요청 내용","label-for":"eq_content","label-class":"required"}},[o("b-form-textarea",{attrs:{id:"eq_content",placeholder:"재견적 요청 내용...",rows:"3",state:t.getValidationState(e)},model:{value:t.reply.eq_content,callback:function(e){t.$set(t.reply,"eq_content",e)},expression:"reply.eq_content"}}),t._v(" "),o("b-form-invalid-feedback",[t._v(t._s(e.errors[0]))])],1)]}}])})],1)],1)],1)],1)]}}])})}),[],!1,null,"49f4b051",null).exports}}]);