"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[905],{43198:(t,a,e)=>{e.d(a,{Z:()=>l});var o=e(23645),r=e.n(o)()((function(t){return t[1]}));r.push([t.id,'.w_fence[data-v-825382aa]{padding-left:0;padding-right:0}.w_fence .container[data-v-825382aa],.w_fence .container .row[data-v-825382aa],.w_fence .container .row .col[data-v-825382aa]{margin:0;padding:0}h3[data-v-825382aa]{font-size:1.5rem}h3 b[data-v-825382aa]{color:#0094ea;font-size:1.3rem}h6[data-v-825382aa]{font-size:1.15rem;font-weight:600;margin-top:2rem;padding-left:2rem}.w_fence .top[data-v-825382aa]{border-left:1px solid #b7b7b7;border-top:2px solid #4f637b}.w_fence .top .row .col[data-v-825382aa]{border-bottom:1px solid #b7b7b7;border-right:1px solid #b7b7b7;padding:1.2rem 0;text-align:center}.w_fence .top .row .col[data-v-825382aa]:nth-of-type(4){flex:0 0 40%;max-width:40%}.w_fence .top .row .col span[data-v-825382aa]{font-weight:600;margin-right:.7rem}.w_fence .top .row .col b[data-v-825382aa]{color:#0094ea}.w_fence .top_border[data-v-825382aa]{border-top:3px solid #4f637b}.pa_list[data-v-825382aa]{margin-bottom:2.5rem;padding:0}.pa_list .row[data-v-825382aa]{border-bottom:1px solid #d6d6d6;margin:0}.pa_list .row .col[data-v-825382aa]{color:#666;font-size:.93rem;padding:0}.pa_list .row.lbody .col[data-v-825382aa]:not(:nth-of-type(2)){align-items:center;display:flex;justify-content:center;text-align:center}.pa_list .row .col .row[data-v-825382aa]:last-child{border-bottom-width:0}.pa_list .row.lbody>.col[data-v-825382aa]:first-child{border-right:1px solid #d6d6d6}.pa_list .row.lbody>.col[data-v-825382aa]:last-child{border-left:1px solid #d6d6d6}.pa_list .lhead .col[data-v-825382aa]{color:#000;font-weight:700;padding:.74rem 0!important;text-align:center}.pa_list .lhead .col[data-v-825382aa]:nth-of-type(2){flex-basis:11.2%;max-width:11.2%}.pa_list .lhead .col[data-v-825382aa]:nth-of-type(3){flex-basis:8.8%;max-width:8.8%}.pa_list .lhead .col[data-v-825382aa]:nth-of-type(4){flex-basis:7.2%;max-width:7.2%}.pa_list .lhead .col[data-v-825382aa]:nth-of-type(5){flex-basis:9.6%;max-width:9.6%}.pa_list .lhead .col[data-v-825382aa]:nth-of-type(6){flex-basis:10%;max-width:10%}.pa_list .lbody>.col[data-v-825382aa]:first-of-type,.pa_list .lbody>.col[data-v-825382aa]:nth-of-type(3){color:#000;flex-basis:10%;font-weight:600;max-width:10%}.pa_list .lbody .col .row .col[data-v-825382aa]:first-of-type{flex-basis:18%;max-width:18%}.pa_list .lbody .col .row .col[data-v-825382aa]:nth-of-type(3){flex-basis:14%;max-width:14%}.pa_list .lbody .col .row .col[data-v-825382aa]:nth-of-type(4){flex-basis:11%;justify-content:flex-end;max-width:11%;padding-right:.5rem}.pa_list .lbody .col .row .col[data-v-825382aa]:nth-of-type(5){flex-basis:9%;justify-content:flex-end;max-width:9%;padding-right:.5rem}.pa_list .lbody .col .row .col[data-v-825382aa]:nth-of-type(6){color:#000;flex-basis:12%;font-weight:600;justify-content:flex-end;max-width:12%;padding-right:.5rem}.pa_list .lbody .col .row .col:nth-of-type(6) span[data-v-825382aa]{color:#666;font-size:.7rem}.pa_list .row .col .row.option[data-v-825382aa]{background:#f4f1ec}.pa_list .row .col .row .col[data-v-825382aa]{padding:.8rem 0}.pa_list .row .col .row .col img[data-v-825382aa]{height:119px;-o-object-fit:contain;object-fit:contain;width:119px}.pa_list .row .col .row .col p[data-v-825382aa]{margin-bottom:.2rem}.pa_list .row .col .row .col[data-v-825382aa]:nth-of-type(2){padding-left:1rem}.pa_list .row .col .row .col:nth-of-type(2) p[data-v-825382aa]:first-of-type{color:#000;font-weight:700;margin-bottom:.8rem}.pa_list .row .col[data-v-825382aa] .myCheck{display:inline-block;margin:0 .5rem;padding-left:1.3em}.pa_list .row .col[data-v-825382aa] .myCheck .custom-control-label:after,.pa_list .row .col[data-v-825382aa] .myCheck .custom-control-label:before{height:1.8rem;top:-2px;width:1.8rem}.pa_list .total[data-v-825382aa]{border-bottom:1px solid #d6d6d6;border-top:2px solid #363636;margin-top:1.6rem}.pa_list .total .col[data-v-825382aa]{color:#000;font-weight:700}.pa_list .total .col[data-v-825382aa]:nth-of-type(odd){align-items:center;display:flex;flex-basis:12%;font-size:.9vw;max-width:12%;padding:1vw 0 1vw 2vw}.pa_list .total .col[data-v-825382aa]:nth-of-type(2n){padding:1vw 2vw 1vw 0;text-align:right}.pa_list .total .col[data-v-825382aa]:nth-of-type(2):after,.pa_list .total .col[data-v-825382aa]:nth-of-type(4):after{background:#707070;border-radius:13px;color:#fff;font-size:1.4rem;height:25px;line-height:1.32rem;position:absolute;right:-14px;text-align:center;top:50%;transform:translateY(-50%);width:25px}.pa_list .total .col b[data-v-825382aa]{font-size:1.4rem}.pa_list .total .col[data-v-825382aa]:nth-of-type(2){border-right:1px solid #d6d6d6}.pa_list .total .col[data-v-825382aa]:nth-of-type(2):after{content:"+"}.pa_list .total .col[data-v-825382aa]:nth-of-type(4){border-right:1px solid #d6d6d6}.pa_list .total .col[data-v-825382aa]:nth-of-type(4):after{content:"="}.pa_list .total .col[data-v-825382aa]:nth-of-type(5),.pa_list .total .col[data-v-825382aa]:nth-of-type(6){flex-basis:20%;max-width:20%}.pa_list .total_sub[data-v-825382aa]{background:#f2f3f5;border-bottom-width:0}.pa_list .total_sub>.col[data-v-825382aa]:first-of-type,.pa_list .total_sub>.col[data-v-825382aa]:nth-of-type(2){border-right:1px solid #d6d6d6}.pa_list .total_sub>.col[data-v-825382aa]:nth-of-type(3){flex-basis:40%;max-width:40%}.pa_list .total_sub .col>div[data-v-825382aa]{display:flex;flex-wrap:wrap}.pa_list .total_sub .col>div[data-v-825382aa]:first-of-type{padding:1.3rem 3rem .5rem}.pa_list .total_sub .col>div[data-v-825382aa]:nth-of-type(2){padding:0 3rem 2.5rem}.pa_list .total_sub .col>div .col[data-v-825382aa]{color:#a8a9ab;font-size:.84rem;font-weight:700}.pa_list .total_sub .col>div .col[data-v-825382aa]:nth-of-type(2){text-align:right}.w_fence .extra[data-v-825382aa]{margin-top:2rem}.w_fence .extra .row .col[data-v-825382aa]:first-child{margin-right:2rem}.w_fence .extra .row .col h6[data-v-825382aa]{border-bottom:2px solid #707070;margin-bottom:.7rem;padding-bottom:.5rem}.w_fence .extra .row .col h6 b[data-v-825382aa]{color:#0094ea}.w_fence .extra .row .col:first-child .desc[data-v-825382aa]{border:1px solid #d6d6d6;min-height:calc(3vw + 5rem);padding:1rem}.w_fence .extra .row .col .btn[data-v-825382aa]{font-size:.85rem;padding:.3rem}',""]);const l=r},60905:(t,a,e)=>{e.r(a),e.d(a,{default:()=>m});var o=e(87757),r=e.n(o),l=e(44670);function i(t,a,e,o,r,l,i){try{var n=t[l](i),s=n.value}catch(t){return void e(t)}n.done?a(s):Promise.resolve(s).then(o,r)}function n(t){return function(){var a=this,e=arguments;return new Promise((function(o,r){var l=t.apply(a,e);function n(t){i(l,o,r,n,s,"next",t)}function s(t){i(l,o,r,n,s,"throw",t)}n(void 0)}))}}function s(t,a){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,a){if(!t)return;if("string"==typeof t)return c(t,a);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return c(t,a)}(t))||a&&t&&"number"==typeof t.length){e&&(t=e);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,n=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){n=!0,l=t},f:function(){try{i||null==e.return||e.return()}finally{if(n)throw l}}}}function c(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,o=new Array(a);e<a;e++)o[e]=t[e];return o}const d={name:"mypageEstimateReplyShow",components:{LoadingModal:function(){return e.e(2008).then(e.bind(e,32008))},PaList:function(){return e.e(6233).then(e.bind(e,96233))}},data:function(){return{isLoadingModalViewed:!0,reply:{},gd_price:0,surtax:0,dlvy_4s:0,dlvy_other:0,air_price:0,all_price:0,sum_mileage:0,indeterminate:!1,all_chk:!0}},computed:{},methods:{settle:function(){var t=[],a=!1;for(var e in this.reply.collect.lists){var o,r=s(this.reply.collect.lists[e]);try{for(r.s();!(o=r.n()).done;){var l=o.value;"model"==l.type&&(l.ea>0&&l.em_check_opt?(t.push({gd_id:l.gd_id,em_id:l.em_id}),a=!0):a=!1),"option"==l.type&&a&&t.push({gd_id:l.gd_id,eo_id:l.eo_id})}}catch(t){r.e(t)}finally{r.f()}}if(!t.length)return Notify.modal("모델을 선택하세요","info"),!1;this.$router.push({name:"order_settle",params:{od_goods:t,od_type:"buy_estimate",od_er_id:this.$route.params.er_id}})},reEstimate:function(){var t=this;return n(r().mark((function a(){var e;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$refs.observer.validate();case 2:if(!a.sent){a.next=17;break}return a.prev=4,a.next=7,l.Z.post("/api/shop/estimate/reEstimate",t.reply);case 7:(e=a.sent)&&200===e.status?(console.log(e),Notify.toast("success","견적 요청 완료"),t.$router.push({name:"my_estimate"})):Notify.toast("warning",e),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(4),Notify.consolePrint(a.t0),Notify.toast("warning",a.t0.responsee);case 15:a.next=18;break;case 17:document.getElementById("eq_content").focus();case 18:case"end":return a.stop()}}),a,null,[[4,11]])})))()},print:function(){var t="/api/shop/estimate/printEstimate/".concat(this.$route.params.er_id);window.open(t,"견적서 인쇄","width = 900, height = 900, top = 10, left = 10, location = no")},getValidationState:function(t){var a=t.dirty,e=t.validated,o=t.valid;return a||e?void 0===o?null:o:null},calculator:function(){var t={},a=0,e=0,o=!1;for(var r in this.reply.collect.lists){var l,i=s(this.reply.collect.lists[r]);try{for(i.s();!(l=i.n()).done;){var n=l.value;"model"==n.type&&(n.em_check_opt?(t.hasOwnProperty(r)||(r>0&&"AIR"==n.pa_type?t[r]={goods:0,dlvy:0,air:Number(n.pa_dlvy_p_add_vat)}:t[r]={goods:0,dlvy:Number(n.pa_dlvy_p_add_vat),free_dlvy_max:Number(this.reply.goods.free_dlvy_max),air:0}),t[r].goods+=Number(n.price)*Number(n.ea),a+=n.price*this.reply.estimate_req.user.mileage_mul*n.ea,o=!0):o=!1),"option"==n.type&&o&&(t[r].goods+=Number(n.price)*Number(n.ea),a+=n.price*this.reply.estimate_req.user.mileage_mul*n.ea)}}catch(t){i.e(t)}finally{i.f()}}for(var c in this.gd_price=Object.values(t).reduce((function(t,a){return t+a.goods}),0),this.air_price=Object.values(t).reduce((function(t,a){return t+a.air}),0),this.surtax=Number((.1*this.gd_price).toFixed()),t)0==c?t[c].dlvy&&t[c].goods<t[c].free_dlvy_max&&(this.dlvy_4s=Number(t[c].dlvy)):t[c].dlvy&&t[c].goods<t[c].free_dlvy_max&&(e+=Number(t[c].dlvy));this.dlvy_other=e,this.sum_mileage=a,this.all_price=this.gd_price+this.surtax+this.dlvy_4s+this.air_price+e},chkChange:function(){var t=Object.values(this.reply.collect.lists).reduce((function(t,a){return t+a.filter((function(t){return 1==t.em_check_opt})).length}),0);0===t?(this.indeterminate=!1,this.all_chk=!1):t===this.reply.estimate_model.length?(this.indeterminate=!1,this.all_chk=!0):(this.indeterminate=!0,this.all_chk=!1),this.calculator()},toggle_all_chk:function(t){Object.values(this.reply.collect.lists).forEach((function(a){a.forEach((function(a){a.em_check_opt=!!t}))})),this.indeterminate=!1}},mounted:function(){var t=this;return n(r().mark((function a(){var e;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.Z.get("/api/shop/estimate/reply/".concat(t.$route.params.er_id));case 2:(e=a.sent)&&200===e.status&&(t.reply=e.data,t.isLoadingModalViewed=!1,t.calculator());case 4:case"end":return a.stop()}}),a)})))()}};var _=e(93379),p=e.n(_),v=e(43198),f={insert:"head",singleton:!1};p()(v.Z,f);v.Z.locals;const m=(0,e(51900).Z)(d,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-container",{staticClass:"w_fence"},[e("h3",[t._v("견적서 "),e("b",[t._v(t._s(t.reply.er_id))])]),t._v(" "),e("ValidationObserver",{ref:"observer",staticClass:"estimate_show",attrs:{tag:"form"},scopedSlots:t._u([{key:"default",fn:function(a){a.invalid;return[t.isLoadingModalViewed?e("LoadingModal",{attrs:{position:"absolute"},on:{"close-modal":function(a){t.isLoadingModalViewed=!1}}},[t._v("\r\n            Loading ......\r\n        ")]):e("div",[e("b-container",{staticClass:"top"},[e("b-row",[e("b-col",[e("span",[t._v("견적일자")]),t._v(" "),e("b",[t._v(t._s(t._f("formatDate_YYYY_MM_DD")(t.reply.created_at)))])]),t._v(" "),e("b-col",[e("span",[t._v("유효기간")]),t._v(" "),e("b",[t._v(t._s(t._f("formatDate_YYYY_MM_DD")(t.reply.er_effective_at)))])]),t._v(" "),e("b-col",[e("span",[t._v("납품기일")]),t._v(" "),e("b",[t._v(t._s(t.reply.er_dlvy_at))])]),t._v(" "),e("b-col",[e("span",[t._v("담당자/문의")]),t._v(" "+t._s(t.reply.user.name)+"   "+t._s(t.reply.user.tel)+"   "+t._s(t.reply.user.email))])],1)],1),t._v(" "),e("h6",[t._v("상품정보")]),t._v(" "),e("div",{staticClass:"top_border"}),t._v(" "),e("b-container",{staticClass:"pa_list frm_st"},[e("b-row",{staticClass:"lhead"},[e("b-col",[e("b-form-checkbox",{staticClass:"myCheck",attrs:{indeterminate:t.indeterminate},on:{change:t.toggle_all_chk},model:{value:t.all_chk,callback:function(a){t.all_chk=a},expression:"all_chk"}}),t._v("\r\n                        주문 상품\r\n                    ")],1),t._v(" "),e("b-col",[t._v("제조사")]),t._v(" "),e("b-col",[t._v("판매가")]),t._v(" "),e("b-col",[t._v("수량")]),t._v(" "),e("b-col",[t._v("금액")]),t._v(" "),e("b-col",[t._v("배송비")])],1),t._v(" "),t._l(t.reply.collect.lists,(function(a,o){return e("b-row",{key:o,staticClass:"lbody"},[e("b-col",{staticClass:"m_hide"},[t._v(t._s(a[0].pa_name?"업체":"포사이언스")),e("br"),t._v("배송")]),t._v(" "),e("b-col",t._l(a,(function(a,r){return e("b-row",{key:""+o+r,class:{option:"option"==a.type}},["model"==a.type?[e("b-col",[e("b-form-checkbox",{staticClass:"myCheck",on:{change:t.chkChange},model:{value:a.em_check_opt,callback:function(e){t.$set(a,"em_check_opt",e)},expression:"item.em_check_opt"}}),t._v(" "),e("img",{attrs:{src:a.img}})],1),t._v(" "),e("b-col",[e("p",[t._v(t._s(a.gd_name))]),t._v(" "),e("p",[t._v("모델명:"+t._s(a.gm_code)+" / Cat.No.:"+t._s(a.gm_catno))]),t._v(" "),e("p",[t._v("제품명:"+t._s(a.gm_name)+" / 사양:"+t._s(a.gm_spec))]),t._v(" "),e("p",[t._v("판매단위:"+t._s(a.gm_unit))])]),t._v(" "),e("b-col",[t._v(t._s(a.mk_name))]),t._v(" "),e("b-col",[t._v(t._s(t._f("comma")(a.price))+" 원")]),t._v(" "),e("b-col",[t._v(t._s(a.ea)+" 개")]),t._v(" "),e("b-col",[e("div",[t._v("\r\n                                        "+t._s(t._f("comma")(a.price*a.ea))+" 원\r\n                                        "),e("br"),t._v(" "),e("span",[t._v("("+t._s(t._f("comma")(a.price*t.reply.estimate_req.user.mileage_mul*a.ea))+"p 적립)")])])])]:"option"==a.type?[e("b-col",[t._v("추가 옵션")]),t._v(" "),e("b-col",[t._v(t._s(a.goc_name))]),t._v(" "),e("b-col"),t._v(" "),e("b-col",[t._v(t._s(t._f("comma")(a.price))+" 원")]),t._v(" "),e("b-col",[t._v(t._s(a.ea)+" 개")]),t._v(" "),e("b-col",[e("div",[t._v("\r\n                                        "+t._s(t._f("comma")(a.price*a.ea))+" 원\r\n                                        "),e("br"),t._v(" "),e("span",[t._v("("+t._s(t._f("comma")(a.price*t.reply.estimate_req.user.mileage_mul*a.ea))+"p 적립)")])])])]:t._e()],2)})),1),t._v(" "),e("b-col",["AIR"==a[0].pa_type?[t._v("항공운임료")]:[t._v("배송비")],t._v(" "),e("br"),t._v("\r\n                        "+t._s(t._f("comma")(a[0].pa_dlvy_p_add_vat))+" 원\r\n                    ")],2)],1)})),t._v(" "),e("b-row",{staticClass:"total"},[e("b-col",[t._v("상품금액")]),t._v(" "),e("b-col",[e("b",[t._v(t._s(t._f("comma")(t.gd_price+t.surtax)))]),t._v(" 원")]),t._v(" "),e("b-col",[t._v("배송료")]),t._v(" "),e("b-col",[e("b",[t._v(t._s(t._f("comma")(t.dlvy_4s+t.air_price+t.dlvy_other)))]),t._v(" 원")]),t._v(" "),e("b-col",[t._v("결제 예정 금액")]),t._v(" "),e("b-col",[e("b",[t._v(t._s(t._f("comma")(t.all_price)))]),t._v(" 원")])],1),t._v(" "),e("b-row",{staticClass:"total_sub",attrs:{id:"total_sub"}},[e("b-col",[e("div",[e("b-col",[t._v("상품가")]),t._v(" "),e("b-col",[t._v(t._s(t._f("comma")(t.gd_price))+" 원")])],1),t._v(" "),e("div",[e("b-col",[t._v("부가세")]),t._v(" "),e("b-col",[t._v(t._s(t._f("comma")(t.surtax))+" 원")])],1)]),t._v(" "),e("b-col",[e("div",[e("b-col",[t._v("포사이언스 배송")]),t._v(" "),e("b-col",[t._v(t._s(t._f("comma")(t.dlvy_4s))+" 원")])],1),t._v(" "),e("div",[e("b-col",[t._v("업체 배송")]),t._v(" "),e("b-col",[t._v(t._s(t._f("comma")(t.dlvy_other))+" 원")])],1)]),t._v(" "),e("b-col",[e("div",[e("b-col",[t._v("적립예정 마일리지")]),t._v(" "),e("b-col",[t._v(t._s(t._f("comma")(t.sum_mileage))+" 원")])],1)])],1)],2),t._v(" "),e("b-container",{staticClass:"extra"},[e("b-row",[e("b-col",[e("h6",[t._v("추가정보")]),t._v(" "),e("div",t._l(t.reply.file_info,(function(a){return e("b-button",{key:a.fi_id,staticClass:"white mr-2",on:{click:function(e){return t.fileDown(a.down_path,a.fi_original)}}},[e("b-icon",{attrs:{icon:"file-earmark-arrow-down-fill"}}),t._v(" "+t._s(a.fi_original)+"\r\n                            ")],1)})),1),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.nl2br(t.reply.er_content))}})]),t._v(" "),e("b-col",[e("h6",[e("b",[t._v("재견적 요청")])]),t._v(" "),e("validation-provider",{attrs:{name:"견적 요청 내용",rules:"required|min:1"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("b-form-group",{attrs:{"label-for":"eq_content","label-class":"required"}},[e("b-form-textarea",{attrs:{id:"eq_content",placeholder:"재견적 요청 내용...",rows:"6",state:t.getValidationState(a)},model:{value:t.reply.eq_content,callback:function(a){t.$set(t.reply,"eq_content",a)},expression:"reply.eq_content"}}),t._v(" "),e("b-form-invalid-feedback",[t._v(t._s(a.errors[0]))])],1)]}}])})],1)],1)],1),t._v(" "),e("div",{staticClass:"btn_box"},[e("b-button",{staticClass:"black lg",on:{click:t.print}},[t._v("견적서 출력")]),t._v(" "),e("b-button",{staticClass:"gray lg",on:{click:t.reEstimate}},[t._v("선택상품 재견적 요청")]),t._v(" "),e("b-button",{staticClass:"blue lg",on:{click:t.settle}},[t._v("선택상품 주문하기")])],1)],1)]}}])})],1)}),[],!1,null,"825382aa",null).exports}}]);