"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6336],{1827:(t,e,o)=>{o.d(e,{Xs:()=>n,Yb:()=>a,Hw:()=>r});var n=function(t){return isEmpty(t.eq_name)?(Notify.toast("danger","요청자 이름을 입력하세요."),document.getElementById("eq_name").focus(),!1):isEmpty(t.eq_email)?(Notify.toast("danger","요청자 이메일을 입력하세요."),document.getElementById("eq_email").focus(),!1):isEmpty(t.eq_department)?(Notify.toast("danger","요청자 소속을 입력하세요."),document.getElementById("eq_department").focus(),!1):!isEmpty(t.eq_hp)||(Notify.toast("danger","요청자 휴대폰을 입력하세요."),document.getElementById("eq_hp").focus(),!1)},a=function(t){if(t.length<1)return Notify.toast("danger","견적 상품을 추가하세요."),document.getElementById("estimate_model").focus(),!1;for(var e in t){var o=t[e];if(isEmpty(o.em_name))return Notify.toast("danger","제품명을 입력하세요."),document.getElementById("estimate_model."+e+".em_name").focus(),!1;if(isEmpty(o.em_code))return Notify.toast("danger","모델명을 입력하세요."),document.getElementById("estimate_model."+e+".em_code").focus(),!1;if(isEmpty(o.em_ea))return Notify.toast("danger","수량을 입력하세요."),document.getElementById("estimate_model."+e+".em_ea").focus(),!1;if(isEmpty(o.em_dlvy_at))return Notify.toast("danger","납품기일을 입력하세요."),document.getElementById("estimate_model."+e+".em_dlvy_at").focus(),!1;if(isEmpty(o.em_spec))return Notify.toast("danger","제품정보를 입력하세요."),document.getElementById("estimate_model."+e+".em_spec").focus(),!1}return!0},r=function(t){return isEmpty(t.er_dlvy_at)?(Notify.toast("danger","주문 납품기일을 입력하세요."),document.getElementById("er_dlvy_at").focus(),!1):!isEmpty(t.er_effective_at)||(Notify.toast("danger","견적 유효기간을 입력하세요."),document.getElementById("er_effective_at").focus(),!1)}},7847:(t,e,o)=>{o.d(e,{Z:()=>r});var n=o(3645),a=o.n(n)()((function(t){return t[1]}));a.push([t.id,'.card.adform .row .label.long{flex:0 0 15.333334%;max-width:15.333334%}#estimate_model .gd_list:not(:last-of-type){border-bottom:2px solid #f1f1f1;margin-bottom:2rem;padding-bottom:2rem}#estimate_model .flag_tag{color:#fff;display:inline-block;font-weight:700;height:26px;margin-right:13px;position:relative;text-align:center;width:6rem}#estimate_model .flag_tag:after{border-left:13px solid #fff;left:0}#estimate_model .flag_tag:after,#estimate_model .flag_tag:before{border-bottom:13px solid transparent;border-top:13px solid transparent;bottom:0;content:"";height:0;position:absolute;width:0}#estimate_model .flag_tag:before{border-left:13px solid red;right:-13px}#estimate_model .tag_red{background:red}#estimate_model .tag_red:before{border-left-color:red}#estimate_model .tag_green{background:green;width:8rem}#estimate_model .tag_green:before{border-left-color:green}',""]);const r=a},6336:(t,e,o)=>{o.r(e),o.d(e,{default:()=>d});var n=o(7757),a=o.n(n),r=o(4670),i=(o(9087),o(2730)),s=o(1827);function c(t,e,o,n,a,r,i){try{var s=t[r](i),c=s.value}catch(t){return void o(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function l(t){return function(){var e=this,o=arguments;return new Promise((function(n,a){var r=t.apply(e,o);function i(t){c(r,n,a,i,s,"next",t)}function s(t){c(r,n,a,i,s,"throw",t)}i(void 0)}))}}const m={name:"Edit",components:{FormCtrl:function(){return o.e(7929).then(o.bind(o,7929))},FormSetting:function(){return o.e(2729).then(o.bind(o,2729))},FormUser:function(){return o.e(8942).then(o.bind(o,8942))},FormGoods:i.Z,FormExtra:function(){return o.e(3569).then(o.bind(o,1647))}},data:function(){return{isLoadingModalViewed:!1,saveType:"",frm:{}}},methods:{edit:function(){var t=this;return l(a().mark((function e(){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.Z.get("/api/admin/shop/estimate/".concat(t.$route.params.er_id,"/edit"));case 3:(o=e.sent)&&200===o.status&&(t.frm=o.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),Notify.consolePrint(e.t0),Notify.toast("warning",e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},update:function(t){return this.saveType=t,!!(0,s.Xs)(this.frm.estimate_req)&&(!!(0,s.Yb)(this.frm.estimate_model)&&(!!(0,s.Hw)(this.frm)&&void(this.$refs.form_extra.$refs.add_file.acceptedFilesCount().length>0?(this.isLoadingModalViewed=!0,this.$refs.form_extra.$refs.add_file.fileUpLoad()):this.formSubmit())))},formSubmit:function(){var t=this;return l(a().mark((function e(){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.saveType,e.next="store"===e.t0?3:"send"===e.t0?5:7;break;case 3:return t.frm.er_step=0,e.abrupt("break",7);case 5:return t.frm.er_step=1,e.abrupt("break",7);case 7:return e.prev=7,t.frm=Object.assign({},t.frm,{_method:"PATCH"}),e.next=11,r.Z.post("/api/admin/shop/estimate/".concat(t.$route.params.er_id),t.frm);case 11:(o=e.sent)&&200===o.status&&(t.isLoadingModalViewed=!1,t.$router.push({name:"adm_estimate_show_reply",params:{er_id:t.$route.params.er_id}})),e.next=19;break;case 15:e.prev=15,e.t1=e.catch(7),Notify.consolePrint(e.t1),Notify.toast("warning",e.t1.response.data.message);case 19:case"end":return e.stop()}}),e,null,[[7,15]])})))()},all_dc_apply:function(){this.$refs.form_goods.setDcLate()},calculator:function(){this.$refs.form_goods.calculator()}},created:function(){this.edit()}};const d=(0,o(1900).Z)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-container",{staticClass:"p_wrap",attrs:{id:"adm_estimate_edit"}},[o("h1",[t._v("견적서 수정")]),t._v(" "),o("FormCtrl",{on:{save:t.store}}),t._v(" "),o("FormSetting",{on:{all_dc_update:t.all_dc_apply},model:{value:t.frm,callback:function(e){t.frm=e},expression:"frm"}}),t._v(" "),t.frm.estimate_req?o("FormUser",{model:{value:t.frm.estimate_req,callback:function(e){t.$set(t.frm,"estimate_req",e)},expression:"frm.estimate_req"}}):t._e(),t._v(" "),o("FormGoods",{ref:"form_goods",attrs:{frm:t.frm},model:{value:t.frm.estimate_model,callback:function(e){t.$set(t.frm,"estimate_model",e)},expression:"frm.estimate_model"}}),t._v(" "),o("FormExtra",{ref:"form_extra",attrs:{isLoadingModalViewed:t.isLoadingModalViewed},on:{formSubmit:t.formSubmit},model:{value:t.frm,callback:function(e){t.frm=e},expression:"frm"}})],1)}),[],!1,null,null,null).exports},2730:(t,e,o)=>{o.d(e,{Z:()=>y});var n=o(7757),a=o.n(n),r=o(4670);function i(t,e,o,n,a,r,i){try{var s=t[r](i),c=s.value}catch(t){return void o(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function s(t){return function(){var e=this,o=arguments;return new Promise((function(n,a){var r=t.apply(e,o);function s(t){i(r,n,a,s,c,"next",t)}function c(t){i(r,n,a,s,c,"throw",t)}s(void 0)}))}}const c={props:["value","em_id","gd_id"],data:function(){return{option:[],option_child:[],selOpt:{}}},watch:{value:function(t,e){this.$emit("calculator")}},methods:{getOption:function(t){var e=this;return s(a().mark((function o(){var n;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t||Notify.modal("등록된 상품이 없습니다."),o.prev=1,o.next=4,r.Z.get("/api/admin/shop/option",{params:{gd_id:t}});case 4:(n=o.sent)&&200===n.status&&(n.data.length<1&&Notify.modal("등록된 옵션이 없습니다."),e.option=n.data),o.next=12;break;case 8:o.prev=8,o.t0=o.catch(1),Notify.consolePrint(o.t0),Notify.toast("warning",o.t0.response.data.message);case 12:case"end":return o.stop()}}),o,null,[[1,8]])})))()},setOption:function(t){var e=this;return s(a().mark((function o(){var n;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!e.option[t]){o.next=13;break}return e.selOpt=e.option[t],o.prev=2,o.next=5,r.Z.get("/api/admin/shop/option_child",{params:{op_id:e.selOpt.op_id}});case 5:(n=o.sent)&&200===n.status&&(e.option_child=n.data),o.next=13;break;case 9:o.prev=9,o.t0=o.catch(2),Notify.consolePrint(o.t0),Notify.toast("warning",o.t0.response.data.message);case 13:case"end":return o.stop()}}),o,null,[[2,9]])})))()},setOptionChild:function(t){if(this.option_child[t]){var e=Object.assign({},{eo_em_id:this.em_id,eo_gd_id:this.gd_id,eo_opc_id:this.option_child[t].opc_id,eo_tit:this.selOpt.op_name,eo_name:this.option_child[t].opc_name,eo_ea:1,eo_price:this.option_child[t].opc_price});this.value.push(e)}this.option_child=[]},hideOption:function(){this.option=[]},hideOptionChild:function(){this.option_child=[]}}};var l=o(1900);const m=(0,l.Z)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-row",{staticClass:"mt-3"},[o("b-col",{attrs:{cols:"4",offset:"2"}},[t.option.length?o("ul",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideOption,expression:"hideOption"}],staticClass:"list-group autocomplete"},t._l(t.option,(function(e,n){return o("li",{staticClass:"list-group-item",on:{click:function(e){return t.setOption(n)}}},[t._v(t._s(e.op_name))])})),0):t._e()]),t._v(" "),t.option_child.length?o("b-col",{attrs:{cols:"4"}},[o("ul",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideOptionChild,expression:"hideOptionChild"}],staticClass:"list-group autocomplete"},t._l(t.option_child,(function(e,n){return o("li",{staticClass:"list-group-item",on:{click:function(e){return t.setOptionChild(n)}}},[t._v(t._s(e.opc_name))])})),0)]):t._e()],1)}),[],!1,null,null,null).exports;o(381);function d(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){s=!0,r=t},f:function(){try{i||null==o.return||o.return()}finally{if(s)throw r}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}function _(t,e,o,n,a,r,i){try{var s=t[r](i),c=s.value}catch(t){return void o(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function f(t){return function(){var e=this,o=arguments;return new Promise((function(n,a){var r=t.apply(e,o);function i(t){_(r,n,a,i,s,"next",t)}function s(t){_(r,n,a,i,s,"throw",t)}i(void 0)}))}}const p={components:{OptionAdd:m,PriceInput:function(){return o.e(1443).then(o.bind(o,1443))},DcLateInput:function(){return o.e(9380).then(o.bind(o,9380))},ModelSchInput:function(){return o.e(6404).then(o.bind(o,6404))},EaInput:function(){return o.e(5374).then(o.bind(o,5374))},Validation:function(){return o.e(3281).then(o.bind(o,3281))},FormGoodsChecker:function(){return o.e(228).then(o.bind(o,228))}},props:["value","frm"],methods:{emAdd:function(){var t=Object.assign({},this.frm.empty_em);this.value.push(t)},emDel:function(t){var e=this;return f(a().mark((function o(){return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Notify.confirm("삭제","danger");case 2:o.sent&&e.value.splice(t,1);case 4:case"end":return o.stop()}}),o)})))()},openOption:function(t,e){this.$refs.option_add[t].getOption(e)},delOption:function(t,e){this.value[t].estimate_option.splice(e,1)},setDcLate:function(){var t,e=d(this.value);try{for(e.s();!(t=e.n()).done;){var o=t.value;this.$set(o,"em_dc_rate",this.frm.all_dc)}}catch(t){e.e(t)}finally{e.f()}},emReset:function(t){var e=this;return f(a().mark((function o(){var n;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.Z.get("/api/admin/shop/estimate/getEmptyEm");case 2:n=o.sent,e.$set(e.value,t,n.data);case 4:case"end":return o.stop()}}),o)})))()}}};var v=o(3379),b=o.n(v),h=o(7847),g={insert:"head",singleton:!1};b()(h.Z,g);h.Z.locals;const y=(0,l.Z)(p,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-card",{staticClass:"adform",attrs:{id:"estimate_model"}},[o("b-container",[o("b-row",[o("b-col",{staticClass:"tit"},[t._v("견적 상품")])],1),t._v(" "),t._l(t.value,(function(e,n){return o("b-container",{key:n,staticClass:"gd_list"},[o("b-row",{staticClass:"mb-2"},[o("b-col",[o("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"tags"}}),t._v(" "+t._s(n+1)+".\r\n                    "),e.bundle_dc&&e.bundle_dc.length?o("div",{staticClass:"flag_tag tag_red"},[t._v("묶음 할인")]):t._e(),t._v(" "),e.goods&&e.goods.purchase_at?o("div",{staticClass:"flag_tag tag_green"},[t._v("매입처 상품")]):t._e(),t._v(" "),o("b-button",{attrs:{size:"sm"},on:{click:function(o){return t.openOption(n,e.em_gd_id)}}},[o("b-icon-search"),t._v(" 옵션")],1),t._v("\r\n                    23-1-1\r\n                ")],1),t._v(" "),o("b-col",{staticClass:"text-right"},[o("b-button",{staticClass:"em_reset",attrs:{variant:"warning",size:"sm"},on:{click:function(e){return t.emReset(n)}}},[t._v("초기화")]),t._v(" "),0!=n?o("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"danger",size:"sm",title:"삭제"},on:{click:function(e){return t.emDel(n)}}},[o("b-icon-x-lg")],1):t._e()],1)],1),t._v(" "),o("b-row",[o("b-col",{staticClass:"label"},[t._v("제품명")]),t._v(" "),o("b-col",{staticClass:"type02"},[o("b-form-input",{attrs:{id:"estimate_model."+n+".em_name"},model:{value:e.em_name,callback:function(o){t.$set(e,"em_name",o)},expression:"em.em_name"}}),t._v(" "),o("Validation",{attrs:{error:t.$store.state.error.validations["estimate_model."+n+".em_name"]}})],1),t._v(" "),o("b-col",{staticClass:"label"},[t._v("CAT.No")]),t._v(" "),o("b-col",{staticClass:"type02"},[o("ModelSchInput",{attrs:{type:"em_catno",id:"em_catno"+n,em:e},model:{value:e.em_catno,callback:function(o){t.$set(e,"em_catno",o)},expression:"em.em_catno"}})],1),t._v(" "),o("b-col",{staticClass:"label"},[t._v("모델명")]),t._v(" "),o("b-col",{staticClass:"type02"},[o("ModelSchInput",{attrs:{type:"em_code",id:"estimate_model."+n+".em_code",em:e},model:{value:e.em_code,callback:function(o){t.$set(e,"em_code",o)},expression:"em.em_code"}}),t._v(" "),o("Validation",{attrs:{error:t.$store.state.error.validations["estimate_model."+n+".em_code"]}})],1),t._v(" "),o("b-col",{staticClass:"label"},[t._v("판매단위")]),t._v(" "),o("b-col",{staticClass:"type02"},[o("b-form-input",{model:{value:e.em_unit,callback:function(o){t.$set(e,"em_unit",o)},expression:"em.em_unit"}})],1)],1),t._v(" "),o("b-row",{staticClass:"mb-3"},[o("b-col",{staticClass:"label"},[t._v("제조사")]),t._v(" "),o("b-col",{staticClass:"type02"},[o("b-form-input",{model:{value:e.em_maker,callback:function(o){t.$set(e,"em_maker",o)},expression:"em.em_maker"}})],1),t._v(" "),o("b-col",{staticClass:"label"},[t._v("수량")]),t._v(" "),o("b-col",{staticClass:"type01"},[o("EaInput",{attrs:{id:"estimate_model."+n+".em_ea",em:e},model:{value:e.em_ea,callback:function(o){t.$set(e,"em_ea",o)},expression:"em.em_ea"}}),t._v(" "),o("Validation",{attrs:{error:t.$store.state.error.validations["estimate_model."+n+".em_ea"]}})],1),t._v(" "),o("b-col",{staticClass:"label long"},[t._v("판매단가("+t._s(t._f("comma")(e.em_cost_price))+")")]),t._v(" "),o("b-col",{staticClass:"type01"},[o("PriceInput",{attrs:{id:"estimate_model."+n+".em_price"},model:{value:e.em_price,callback:function(o){t.$set(e,"em_price",o)},expression:"em.em_price"}}),t._v(" "),o("Validation",{attrs:{error:t.$store.state.error.validations["estimate_model."+n+".em_price"]}})],1),t._v(" "),o("b-col",{staticClass:"label"},[t._v("할인율")]),t._v(" "),o("b-col",{staticClass:"type01"},[o("DcLateInput",{attrs:{id:"em_dc_rate"+n,em:e},model:{value:e.em_dc_rate,callback:function(o){t.$set(e,"em_dc_rate",o)},expression:"em.em_dc_rate"}})],1),t._v(" "),o("b-col",{staticClass:"label"},[t._v("납품기일")]),t._v(" "),o("b-col",{staticClass:"type01"},[o("b-form-input",{attrs:{id:"estimate_model."+n+".em_dlvy_at"},model:{value:e.em_dlvy_at,callback:function(o){t.$set(e,"em_dlvy_at",o)},expression:"em.em_dlvy_at"}}),t._v(" "),o("Validation",{attrs:{error:t.$store.state.error.validations["estimate_model."+n+".em_dlvy_at"]}})],1)],1),t._v(" "),o("b-row",[o("b-col",{staticClass:"label"},[t._v("제품정보")]),t._v(" "),o("b-col",{staticClass:"type11"},[o("b-form-textarea",{attrs:{id:"estimate_model."+n+".em_spec",rows:"3"},model:{value:e.em_spec,callback:function(o){t.$set(e,"em_spec",o)},expression:"em.em_spec"}}),t._v(" "),o("Validation",{attrs:{error:t.$store.state.error.validations["estimate_model."+n+".em_spec"]}})],1)],1),t._v(" "),o("OptionAdd",{ref:"option_add",refInFor:!0,attrs:{em_id:e.em_id,gd_id:e.em_gd_id},model:{value:e.estimate_option,callback:function(o){t.$set(e,"estimate_option",o)},expression:"em.estimate_option"}}),t._v(" "),e.estimate_option.length?t._l(e.estimate_option,(function(e,a){return o("b-row",{key:"op"+n+"_"+a,staticClass:"op_list mt-3",attrs:{"align-h":"end"}},[o("b-col",{attrs:{cols:"2"}},[o("b-button",{attrs:{variant:"danger",size:"xm"},on:{click:function(e){return t.delOption(n,a)}}},[t._v("X")]),t._v("\r\n                        "+t._s(e.eo_tit)+": "+t._s(e.eo_name)+"\r\n                    ")],1),t._v(" "),o("b-col",{staticClass:"awesome_p",attrs:{cols:"2"}},[o("EaInput",{attrs:{id:"eo_ea"+n+"_"+a},model:{value:e.eo_ea,callback:function(o){t.$set(e,"eo_ea",o)},expression:"eo.eo_ea"}}),t._v(" "),o("label",{attrs:{for:"eo_ea"+n+"_"+a}},[t._v("수량")])],1),t._v(" "),o("b-col",{attrs:{cols:"2"}},[o("div",{staticClass:"awesome_p"},[o("PriceInput",{attrs:{id:"eo_price"+n+"_"+a},model:{value:e.eo_price,callback:function(o){t.$set(e,"eo_price",o)},expression:"eo.eo_price"}}),t._v(" "),o("label",{attrs:{for:"eo_price"+n+"_"+a}},[t._v("판매단가")])],1)])],1)})):t._e()],2)})),t._v(" "),o("Validation",{attrs:{error:t.$store.state.error.validations.estimate_model}}),t._v(" "),o("b-row",{staticClass:"m-0"},[o("b-col",{staticClass:"text-right"},[o("b-button",{attrs:{variant:"outline-primary",size:"sm"},on:{click:t.emAdd}},[o("b-icon-plus-square-fill"),t._v(" 추가")],1)],1)],1)],2)],1)}),[],!1,null,null,null).exports}}]);