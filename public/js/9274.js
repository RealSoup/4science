"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9274],{8807:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(3645),n=a.n(r)()((function(e){return e[1]}));n.push([e.id,"#admLedger{font-size:.85rem}#admLedger .p_tit{margin:auto;max-width:1500px}#admLedger .data .list_top{margin-bottom:2px}#admLedger .data .list_top div:nth-child(2){text-align:right}#admLedger .data .ledger_module .row .list_id{flex:0 0 90px;max-width:90px}#admLedger .data .ledger_module .row{align-items:center;margin:0;position:relative}#admLedger .data .ledger_module>.row{margin:auto}#admLedger .data .ledger_module .row .col{line-height:1.1rem;padding-left:5px;padding-right:5px;text-align:center}#admLedger .data .ledger_module .row .model{flex-basis:auto;flex-grow:0;flex-shrink:1;flex-wrap:wrap;max-width:none;min-height:28px;padding:0}#admLedger .data .ledger_module .ctrl{background:#fff;border-radius:0 5px 5px 0;border-right:2px solid #55aebf;color:#126b7c;left:-104px;position:absolute;text-align:right;top:50%;transform:translateY(-50%);transition:all .4s;width:120px;z-index:1}#admLedger .data .ledger_module .row .model .row .ctrl{left:-76px;width:95px}#admLedger .data .ledger_module .ctrl:hover{left:0!important;z-index:2}#admLedger .data .ps .ps__rail-x{height:25px;position:fixed;z-index:1}#admLedger .data .ps .ps__rail-x:hover{background-color:#eee;opacity:.9}#admLedger .data .ps .ps__rail-x .ps__thumb-x{background-color:pink;height:18px;position:fixed}#admLedger .data .ps .ps__rail-x.ps--clicking .ps__thumb-x,#admLedger .data .ps .ps__rail-x:focus>.ps__thumb-x,#admLedger .data .ps .ps__rail-x:hover>.ps__thumb-x{background-color:hotpink;height:22px}",""]);const i=n},9274:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var r=a(7757),n=a.n(r),i=a(4670);function d(e,t,a,r,n,i,d){try{var o=e[i](d),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(r,n)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var i=e.apply(t,a);function o(e){d(i,r,n,o,l,"next",e)}function l(e){d(i,r,n,o,l,"throw",e)}o(void 0)}))}}var l=new Date;l.format("yyyy-MM-dd");l.setDate(1);l.format("yyyy-MM-dd");const m={name:"admLedger",components:{Search:function(){return a.e(7194).then(a.bind(a,7194))},Modal:function(){return a.e(2201).then(a.bind(a,2201))},FormLedger:function(){return a.e(5622).then(a.bind(a,5622))},FormLedgerModel:function(){return a.e(138).then(a.bind(a,138))},ListHead:function(){return a.e(8906).then(a.bind(a,8906))},ListData:function(){return a.e(4148).then(a.bind(a,4148))},CustomSetColumn:function(){return a.e(8541).then(a.bind(a,8541))}},data:function(){return{isModalViewed:!1,actTarget:"set_search",actType:"create",isScrollPass:!1,ledger:{data:[]},frm_ledger:{},frm_ledger_model:{},schFrm:{startDate:"",endDate:""},total:{},mng_list:{},user_mng_config:{COLUMN:[],SEARCH:[],MODEL:[]},mng_info:{},writer:[],column_list_clmn:{order_dt:{w:120,umc_val:"order_dt",name:"주문일"},pay_type:{w:120,umc_val:"pay_type",name:"결제방식"},mng:{w:120,umc_val:"mng",name:"담당자"},source_no:{w:120,umc_val:"source_no",name:"번호"},sale_dt:{w:120,umc_val:"sale_dt",name:"매출일"},distributor:{w:120,umc_val:"distributor",name:"매출처"},depart:{w:120,umc_val:"depart",name:"소속"},lab_prof:{w:120,umc_val:"lab_prof",name:"연구실/교수님"},orderer:{w:120,umc_val:"orderer",name:"고객명"},email:{w:120,umc_val:"email",name:"메일"},hp:{w:120,umc_val:"hp",name:"HP"},note:{w:120,umc_val:"note",name:"비고"},created_at:{w:120,umc_val:"created_at",name:"작성일"},model:{w:0,umc_val:"model",name:"제품정보"}},column_list_model:{gm_name:{w:250,umc_val:"gm_name",name:"품목명"},gm_spec:{w:250,umc_val:"gm_spec",name:"사양"},catno:{w:115,umc_val:"catno",name:"CAT.No"},gm_code:{w:120,umc_val:"gm_code",name:"모델명"},gm_price:{w:90,umc_val:"gm_price",name:"단가"},ea:{w:45,umc_val:"ea",name:"수량"},ea_price:{w:130,umc_val:"ea_price",name:"공급가액"},surtax:{w:90,umc_val:"surtax",name:"세액"},sum_price:{w:130,umc_val:"sum_price",name:"합계"},com_order_dt:{w:120,umc_val:"com_order_dt",name:"업체발주일"},buyer:{w:120,umc_val:"buyer",name:"매입처"},order_mng:{w:120,umc_val:"order_mng",name:"발주담당"},purchase_price:{w:120,umc_val:"purchase_price",name:"매입금액"},shipping_dt:{w:120,umc_val:"shipping_dt",name:"제품발송일"}}}},computed:{row_width:function(){var e=this,t=0;return this.user_mng_config.COLUMN.forEach((function(a){"model"==a.umc_val?e.user_mng_config.MODEL.forEach((function(a){t+=e.column_list_model[a.umc_val].w})):t+=e.column_list_clmn[a.umc_val].w})),t+90},model_width:function(){var e=this,t=0;return this.user_mng_config.MODEL.forEach((function(a){t+=e.column_list_model[a.umc_val].w})),t}},methods:{index:function(){var e=arguments,t=this;return o(n().mark((function a(){var r,d;return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(r=e.length>0&&void 0!==e[0]?e[0]:null)&&(t.schFrm.page=r),a.next=4,i.Z.get("/api/admin/ledger",{params:t.schFrm});case 4:(d=a.sent)&&200===d.status&&(t.ledger=d.data.lg,t.total=d.data.total,t.mng_list=d.data.mng,t.user_mng_config=d.data.user_mng_config,t.mng_info=d.data.mng_info,t.writer=d.data.writer?d.data.writer:[]);case 6:case"end":return a.stop()}}),a)})))()},create:function(e,t){this.isModalViewed=!0,this.actTarget=e,this.actType="create","child"==e&&(this.frm_ledger_model={},this.frm_ledger_model.lm_lg_id=this.ledger.data[t].lg_id)},editColumn:function(){this.isModalViewed=!0,this.actTarget="editColumn"},updateColumnComplete:function(){this.index(),this.isModalViewed=!1},store:function(e){var t=this;return o(n().mark((function a(){var r;return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.Z.post("/api/admin/ledger",e);case 2:(r=a.sent)&&200===r.status&&(t.index(),Notify.toast("success","등록 완료"));case 4:case"end":return a.stop()}}),a)})))()},edit:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.isModalViewed=!0,this.actTarget=e,"papa"==e?this.frm_ledger=this.ledger.data[t]:"child"==e&&(this.frm_ledger_model=this.ledger.data[t].ledger_model[a],this.frm_ledger_model.lm_lg_id=this.ledger.data[t].lg_id),this.actType="edit"},update:function(e){var t=this;return o(n().mark((function a(){var r,d;return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e=Object.assign({},e,{_method:"PATCH"}),r=e.lg_id?e.lg_id:e.lm_lg_id,a.next=4,i.Z.post("/api/admin/ledger/".concat(r),e);case 4:(d=a.sent)&&200===d.status&&(t.index(),Notify.toast("success","수정 완료"));case 6:case"end":return a.stop()}}),a)})))()},register:function(){if("papa"==this.actTarget){var e=Object.assign({},this.frm_ledger);"create"==this.actType?this.store(e):"edit"==this.actType&&this.update(e),this.frm_ledger={lg_pay_type:"CARD",lg_source_type:"ORD",lg_source_no:0,ledger_model:[]}}else if("child"==this.actTarget){var t=Object.assign({},this.frm_ledger_model);"create"==this.actType?this.store(t):"edit"==this.actType&&this.update(t),this.frm_ledger_model={}}this.isModalViewed=!1}},mounted:function(){this.index()}};var s=a(3379),c=a.n(s),_=a(8807),u={insert:"head",singleton:!1};c()(_.Z,u);_.Z.locals;const g=(0,a(1900).Z)(m,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"p_warp",attrs:{id:"admLedger"}},[a("h3",{staticClass:"p_tit"},[e._v("영업 장부")]),e._v(" "),a("Search",{attrs:{search:e.user_mng_config.SEARCH,mng_list:e.mng_list,writer:e.writer},on:{index:e.index},model:{value:e.schFrm,callback:function(t){e.schFrm=t},expression:"schFrm"}}),e._v(" "),a("b-card",{staticClass:"shadow data"},[a("b-row",{staticClass:"list_top"},[a("b-col",[e._v("\r\n                Total : "),a("b-badge",{attrs:{variant:"info"}},[e._v(e._s(e.ledger.total))]),e._v(" "),a("b-button",{staticClass:"ml-4",attrs:{size:"sm"},on:{click:e.editColumn}},[a("b-icon-gear")],1)],1),e._v(" "),a("b-col",[a("b-button",{attrs:{variant:"info",size:"sm"},on:{click:function(t){return e.create("papa")}}},[a("b-icon-plus-lg"),e._v(" 추가")],1)],1)],1),e._v(" "),a("perfect-scrollbar",{attrs:{suppressScrollX:"true"}},[a("ListHead",{attrs:{mng_config_column:e.user_mng_config.COLUMN,column_list_clmn:e.column_list_clmn,mng_config_model:e.user_mng_config.MODEL,column_list_model:e.column_list_model,total:e.total,row_width:e.row_width,model_width:e.model_width},on:{index:e.index}}),e._v(" "),a("ListData",{attrs:{ledger:e.ledger.data,mng_config_column:e.user_mng_config.COLUMN,column_list_clmn:e.column_list_clmn,mng_config_model:e.user_mng_config.MODEL,column_list_model:e.column_list_model,row_width:e.row_width,model_width:e.model_width},on:{index:e.index,create:e.create,edit:e.edit}})],1),e._v(" "),a("pagination",{staticClass:"mt-5",attrs:{data:e.ledger,align:"center"},on:{"pagination-change-page":e.index}})],1),e._v(" "),a("transition",{attrs:{name:"modal"}},[e.isModalViewed?a("Modal",{on:{"close-modal":function(t){e.isModalViewed=!1}}},["papa"==e.actTarget?a("FormLedger",{on:{register:e.register},model:{value:e.frm_ledger,callback:function(t){e.frm_ledger=t},expression:"frm_ledger"}}):"child"==e.actTarget?a("FormLedgerModel",{on:{register:e.register},model:{value:e.frm_ledger_model,callback:function(t){e.frm_ledger_model=t},expression:"frm_ledger_model"}}):"editColumn"==e.actTarget?a("CustomSetColumn",{attrs:{db_config_clmn:e.user_mng_config.COLUMN,db_config_model:e.user_mng_config.MODEL,column_list_clmn:e.column_list_clmn,column_list_model:e.column_list_model},on:{updateColumnComplete:e.updateColumnComplete}}):e._e()],1):e._e()],1)],1)}),[],!1,null,null,null).exports}}]);