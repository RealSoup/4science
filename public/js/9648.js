"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9648],{1694:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(3645),a=n.n(o)()((function(e){return e[1]}));a.push([e.id,"#bo_show #comment #frm_comment .cm_file[data-v-2b15fbda]{background-color:#d8bcf5;cursor:pointer;font-size:1.5rem;padding:2rem 3rem}#bo_show #comment #frm_comment button[data-v-2b15fbda]{padding:2rem 3rem}#bo_show #comment #frm_comment .fileName[data-v-2b15fbda]{margin-top:1rem}#bo_show #comment #frm_comment .fileName .piece[data-v-2b15fbda]{border:1px solid #ddd;border-radius:.3rem;padding:.1rem .3rem}#bo_show #comment #frm_comment .fileName .piece span[data-v-2b15fbda]{cursor:pointer;margin-left:.5rem}",""]);const i=a},9648:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var o=n(7757),a=n.n(o),i=n(4670);function r(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}const s={name:"CommentFormGroup",props:["sltIndex","bo_cd","bo_id","prevBo_content","comment_mode","fi_id"],components:{Validation:function(){return n.e(2181).then(n.bind(n,2181))}},data:function(){return{act_type:"create",bo_content:"",fileName:"",del_file:""}},watch:{comment_mode:function(e,t){this.setBoContent()}},methods:{onSubmit:function(){var e,t=this;return(e=a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},e.prev=1,"create"!=t.comment_mode&&"reCreate"!=t.comment_mode){e.next=8;break}return e.next=5,i.Z.post("/api/board/".concat(t.bo_cd,"/store"),t.getFromData("store"));case 5:n=e.sent,e.next=12;break;case 8:if("reEdit"!=t.comment_mode){e.next=12;break}return e.next=11,i.Z.post("/api/board/".concat(t.bo_cd,"/update/").concat(t.bo_id),t.getFromData("update"));case 11:n=e.sent;case 12:n&&200===n.status&&t.refresh("comment_"+n.data.bo_id),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),Notify.consolePrint(e.t0),Notify.toast("warning",e.t0.response.data.message);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})),function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,c,"next",e)}function c(e){r(i,o,a,s,c,"throw",e)}s(void 0)}))})()},getFromData:function(e){var t=new FormData,n=document.getElementById("file");return"update"==e&&(t.append("_method","PATCH"),this.fi_id&&t.append("prev_fi_id",this.fi_id),this.del_file&&t.append("del_file",this.del_file)),t.append("wri_type","comment"),t.append("bo_papa_id",this.bo_id),n.files.length&&t.append("file",n.files[0]),t.append("bo_subject","comment"),t.append("bo_content",this.bo_content),t.append("fi_group","board"),t.append("fi_kind",this.bo_cd),t.append("is_thumb",!0),t},refresh:function(e){this.$emit("callHideCommentForm"),this.$emit("callIndex",e),this.bo_content="",this.fileDel()},setBoContent:function(){"reCreate"==this.comment_mode?this.bo_content="":"reEdit"==this.comment_mode&&(this.bo_content=this.prevBo_content)},prevViewFiles:function(e){this.fileName=e.target.files[0].name},fileDel:function(){this.fileName="",this.$refs.file.value=""},textAreaFocus:function(){this.$refs.bo_content.focus()}},mounted:function(){this.setBoContent()}};var c=n(3379),m=n.n(c),d=n(1694),l={insert:"head",singleton:!1};m()(d.Z,l);d.Z.locals;const f=(0,n(1900).Z)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{ref:"form",attrs:{id:"frm_comment"},on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[n("div",{staticClass:"input-group"},[n("label",{staticClass:"input-group-text cm_file"},[n("b-icon",{attrs:{icon:"camera"}}),e._v(" "),n("input",{ref:"file",staticClass:"d-none",attrs:{type:"file",id:"file"},on:{change:e.prevViewFiles}})],1),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.bo_content,expression:"bo_content"}],ref:"bo_content",staticClass:"form-control",attrs:{id:"bo_content",name:"bo_content"},domProps:{value:e.bo_content},on:{input:function(t){t.target.composing||(e.bo_content=t.target.value)}}}),e._v(" "),n("b-button",{attrs:{variant:"outline-secondary",size:"sm",type:"submit"}},[e._v("등록")]),e._v(" "),-1!==e.sltIndex?n("b-button",{staticClass:"p-1",attrs:{variant:"outline-danger",size:"sm"},on:{click:e.refresh}},[e._v("\r\n            취소\r\n        ")]):e._e()],1),e._v(" "),n("Validation",{attrs:{error:this.$store.state.error.validations.bo_content}}),e._v(" "),e.fileName?n("p",{staticClass:"fileName"},[n("span",{staticClass:"piece"},[n("span",{domProps:{textContent:e._s(e.fileName)}}),e._v(" "),n("span",{on:{click:e.fileDel}},[n("b-icon",{attrs:{icon:"x-square-fill"}})],1)])]):e._e(),e._v(" "),e.fi_id?n("p",{staticClass:"fileName"},[n("b-form-checkbox",{attrs:{value:e.fi_id},model:{value:e.del_file,callback:function(t){e.del_file=t},expression:"del_file"}},[e._v("\r\n            파일 삭제\r\n        ")])],1):e._e()],1)}),[],!1,null,"2b15fbda",null).exports}}]);