"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[42],{8783:(t,e,a)=>{a.d(e,{Z:()=>i});var r=a(3645),o=a.n(r)()((function(t){return t[1]}));o.push([t.id,"#adm_estimate_show .user_info[data-v-edfdb040]{border:1px solid #ededed;box-shadow:3px 2px 2px 0;padding-top:1rem}#adm_estimate_show .user_info .col div[data-v-edfdb040]{margin:1rem}#adm_estimate_show .user_info .col div span[data-v-edfdb040]{margin-right:1rem}#adm_estimate_show .user_info .col div span>svg[data-v-edfdb040]{margin-right:.5rem}#adm_estimate_show .gd_box .gd_list[data-v-edfdb040]:not(:last-of-type){border-bottom:1px solid #eee}#adm_estimate_show .gd_box .gd_list .col[data-v-edfdb040]{padding-bottom:10px;padding-top:10px}#adm_estimate_show .gd_box .gd_list .col .btn[data-v-edfdb040]{margin-right:10px}#adm_estimate_show .gd_box .gd_list .col .divider[data-v-edfdb040]{color:#b81717;font-size:1.6rem;font-weight:700;line-height:14px;padding:0 5px;position:relative;top:3px}#adm_estimate_show .gd_box .gd_list i[data-v-edfdb040]{text-align:right}#adm_estimate_show .gd_box .gd_list .col .multi[data-v-edfdb040]{display:inline-block;min-width:6rem}#adm_estimate_show .gd_box .gd_list .opc .row div[data-v-edfdb040],#adm_estimate_show .gd_box .gd_list>.col[data-v-edfdb040]:nth-child(2){background-color:#7fffd454}#adm_estimate_show .gd_box .gd_list .opc[data-v-edfdb040]{border-top:1px solid #eee}#adm_estimate_show .gd_box .gd_list .col[data-v-edfdb040]:nth-child(2),#adm_estimate_show .gd_box .gd_list .col[data-v-edfdb040]:nth-child(3){flex:0 0 25%;max-width:25%}#adm_estimate_show .price_info .row .col span[data-v-edfdb040]{color:#c10000;display:inline-block;font-size:1.3rem;font-weight:700;min-width:10rem}",""]);const i=o},42:(t,e,a)=>{a.r(e),a.d(e,{default:()=>p});var r=a(7757),o=a.n(r),i=a(4670);function s(t,e,a,r,o,i,s){try{var n=t[i](s),c=n.value}catch(t){return void a(t)}n.done?e(c):Promise.resolve(c).then(r,o)}function n(t){return function(){var e=this,a=arguments;return new Promise((function(r,o){var i=t.apply(e,a);function n(t){s(i,r,o,n,c,"next",t)}function c(t){s(i,r,o,n,c,"throw",t)}n(void 0)}))}}var c=new Date;const _={data:function(){return{frm:{collect:{lists:{},price:{}},estimate_req:{},user:{},price:{}}}},methods:{show:function(){var t=this;return n(o().mark((function e(){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.get("/api/admin/shop/estimate/".concat(t.$route.params.er_id),{params:{type:"reply"}});case 3:(a=e.sent)&&200===a.status&&(t.frm=a.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),Notify.consolePrint(e.t0),Notify.toast("warning",e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},destroy:function(){var t=this;return n(o().mark((function e(){var a,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Notify.confirm("삭제","danger");case 2:if(!e.sent){e.next=19;break}return e.prev=4,(a=new FormData).append("_method","DELETE"),a.append("type","reply"),e.next=10,i.Z.post("/api/admin/shop/estimate/".concat(t.$route.params.er_id),a);case 10:(r=e.sent)&&200===r.status&&(Notify.toast("success","견적서 삭제"),t.$router.push({name:"adm_estimate_index"})),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(4),Notify.consolePrint(e.t0),Notify.toast("danger","삭제 실패"),Notify.toast("danger",e.t0.response.data.message);case 19:case"end":return e.stop()}}),e,null,[[4,14]])})))()},print:function(){var t="/api/admin/shop/estimate/showEstimate/".concat(this.$route.params.er_id,"/?type=print");window.open(t,"견적서 인쇄","width = 900, height = 900, top = 10, left = 10, location = no")},estimateExcel:function(){var t=this;return n(o().mark((function e(){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.get("/api/admin/shop/estimate/exportEstimateExcel/".concat(t.$route.params.er_id),{responseType:"blob"});case 3:a=e.sent,t.orderDocumentDown(a,"Estimate_"+c.format("yyyyMMdd")+".xlsx"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Notify.consolePrint(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},estimatePdf:function(){var t=this;return n(o().mark((function e(){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.get("/api/admin/shop/estimate/exportEstimatePdf/".concat(t.$route.params.er_id),{responseType:"blob"});case 3:a=e.sent,t.orderDocumentDown(a,"Estimate_"+c.format("yyyyMMdd")+".pdf"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Notify.consolePrint(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},transactionExcel:function(){var t=this;return n(o().mark((function e(){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.get("/api/admin/shop/estimate/exportTransactionExcel/".concat(t.$route.params.er_id),{responseType:"blob"});case 3:a=e.sent,t.orderDocumentDown(a,"Transaction_"+c.format("yyyyMMdd")+".xlsx"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Notify.consolePrint(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},transactionPdf:function(){var t=this;return n(o().mark((function e(){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.get("/api/admin/shop/estimate/exportTransactionPdf/".concat(t.$route.params.er_id),{responseType:"blob"});case 3:a=e.sent,t.orderDocumentDown(a,"Transaction_"+c.format("yyyyMMdd")+".pdf"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Notify.consolePrint(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},orderDocumentDown:function(t,e){var a=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=a,r.setAttribute("download",e),document.body.appendChild(r),r.click()},reSend:function(){var t=this;return n(o().mark((function e(){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.post("/api/admin/shop/estimate/reSend/".concat(t.$route.params.er_id),t.frm);case 3:(a=e.sent)&&200===a.status&&Notify.toast("success","재발송 완료"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Notify.consolePrint(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},onlineBooks:function(){var t=this;return n(o().mark((function e(){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.frm.data_type="EST",e.next=4,i.Z.post("/api/admin/ledger",t.frm);case 4:(a=e.sent)&&200===a.status?t.$router.push({name:"adm_ledger"}):Notify.toast("warning","기록 실패"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),Notify.consolePrint(e.t0),Notify.toast("warning",e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},passOrder:function(){var t=this;return n(o().mark((function e(){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.post("/api/admin/shop/order",t.frm);case 3:(a=e.sent)&&200===a.status?t.$router.push({name:"adm_order_index"}):Notify.toast("warning","기록 실패"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),Notify.consolePrint(e.t0),Notify.toast("warning",e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},mounted:function(){this.show()}};var d=a(3379),m=a.n(d),v=a(8783),l={insert:"head",singleton:!1};m()(v.Z,l);v.Z.locals;const p=(0,a(1900).Z)(_,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p_warp",attrs:{id:"adm_estimate_show"}},[a("h3",{staticClass:"p_tit"},[t._v("견적 응답")]),t._v(" "),a("b-card",{staticClass:"ctrl",attrs:{"no-body":""}},[a("b-container",[a("b-row",[a("b-col",[a("b-button-group",{attrs:{size:"sm"}},[a("b-button",{attrs:{to:{name:"adm_estimate_index"}}},[a("b-icon-list-ul"),t._v(" 목록")],1),t._v(" "),a("b-dropdown",{attrs:{size:"sm",text:"파일 출력",variant:"warning"}},[a("b-dropdown-item-button",{attrs:{variant:"success"},on:{click:t.estimateExcel}},[t._v("견적서 "),a("b-badge",[t._v("EXCEL")])],1),t._v(" "),a("b-dropdown-item-button",{attrs:{variant:"warning"},on:{click:t.estimatePdf}},[t._v("견적서 "),a("b-badge",[t._v("PDF")])],1),t._v(" "),a("b-dropdown-divider"),t._v(" "),a("b-dropdown-item-button",{attrs:{variant:"success"},on:{click:t.transactionExcel}},[t._v("거래명세서 "),a("b-badge",[t._v("EXCEL")])],1),t._v(" "),a("b-dropdown-item-button",{attrs:{variant:"warning"},on:{click:t.transactionPdf}},[t._v("거래명세서 "),a("b-badge",[t._v("PDF")])],1)],1),t._v(" "),a("b-button",{attrs:{variant:"dark"},on:{click:t.print}},[t._v("인쇄")])],1)],1),t._v(" "),a("b-col",{staticClass:"text-right"},[a("b-button-group",{attrs:{size:"sm"}},[a("b-button",{attrs:{variant:"dark"},on:{click:t.passOrder}},[a("b-icon-box-arrow-up-right"),t._v(" 임의주문")],1),t._v(" "),a("b-button",{attrs:{variant:"primary"},on:{click:t.reSend}},[a("b-icon-mailbox"),t._v(" 재발송")],1),t._v(" "),a("b-button",{attrs:{variant:"success",to:{name:"adm_estimate_create",query:{eq_id:t.frm.estimate_req.eq_id}}}},[a("b-icon-pencil-square"),t._v(" 재작성")],1),t._v(" "),a("b-button",{attrs:{variant:"warning",to:{name:"adm_estimate_edit",params:{er_id:t.$route.params.er_id}}}},[a("b-icon-tools"),t._v(" 수정")],1),t._v(" "),a("b-button",{attrs:{variant:"danger"},on:{click:t.destroy}},[a("b-icon-trash-fill"),t._v(" 삭제")],1)],1)],1)],1)],1)],1),t._v(" "),a("b-alert",{staticClass:"container user_info mt-4",attrs:{show:"",variant:"primary"}},[a("h4",{staticClass:"alert-heading"},[t._v("요청자")]),t._v(" "),a("hr"),t._v(" "),a("b-row",[a("b-col",[a("div",[a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"요청번호"}},[a("font-awesome-icon",{attrs:{icon:"tags"}}),t._v(t._s(t.frm.estimate_req.eq_id))],1),t._v(" "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"요청일"}},[a("b-icon-calendar-date"),t._v(t._s(t.frm.estimate_req.created_at))],1),t._v(" "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"요청단계"}},[a("b-icon-bar-chart-steps"),t._v(" "),"DONOT"===t.frm.estimate_req.eq_step?[t._v("미처리")]:"DOING"===t.frm.estimate_req.eq_step?[t._v("처리중")]:"DONE"===t.frm.estimate_req.eq_step?[t._v("완료")]:"CANCEL"===t.frm.estimate_req.eq_step?[t._v("취소")]:t._e()],2)]),t._v(" "),a("div",[a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"요청자"}},[a("font-awesome-icon",{attrs:{icon:"user"}}),t._v("\n                        "+t._s(t.frm.estimate_req.eq_name)+"\n                        "),t.frm.estimate_req.created_id?a("b-button",{attrs:{variant:"outline-primary",size:"xm",to:{name:"adm_user_edit",params:{id:t.frm.estimate_req.created_id}}}},[a("b-icon-link45deg")],1):t._e()],1),t._v(" "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"요청자 소속"}},[a("font-awesome-icon",{attrs:{icon:"users"}}),t._v(t._s(t.frm.estimate_req.eq_department))],1)]),t._v(" "),a("div",[a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"전화번호"}},[a("font-awesome-icon",{attrs:{icon:"phone"}}),t._v(t._s(t.frm.estimate_req.eq_tel))],1),t._v(" "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"핸드폰"}},[a("font-awesome-icon",{attrs:{icon:"mobile-alt"}}),t._v(t._s(t.frm.estimate_req.eq_hp))],1),t._v(" "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"팩스"}},[a("font-awesome-icon",{attrs:{icon:"fax"}}),t._v(t._s(t.frm.estimate_req.eq_fax))],1),t._v(" "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"이메일"}},[a("font-awesome-icon",{attrs:{icon:"at"}}),t._v(t._s(t.frm.estimate_req.eq_email))],1)]),t._v(" "),a("div",[a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"내용"}},[a("font-awesome-icon",{attrs:{icon:"comment-dots"}}),t._v(" "),a("p",{domProps:{innerHTML:t._s(t.nl2br(t.frm.estimate_req.eq_content))}})],1)])])],1)],1),t._v(" "),a("b-alert",{staticClass:"container user_info",attrs:{show:"",variant:"info"}},[a("h4",{staticClass:"alert-heading"},[t._v("견적 정보")]),t._v(" "),a("hr"),t._v(" "),a("b-row",[a("b-col",[a("div",[a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"견적번호"}},[a("font-awesome-icon",{attrs:{icon:"tags"}}),t._v(t._s(t.frm.er_id))],1),t._v(" "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"견적일"}},[a("b-icon-calendar-date"),t._v(t._s(t.frm.created_at))],1),t._v(" "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"납품기일"}},[a("font-awesome-icon",{attrs:{icon:"dolly-flatbed"}}),t._v(t._s(t.frm.er_dlvy_at))],1),t._v(" "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"견적서 유효기간"}},[a("b-icon-stopwatch-fill"),t._v(t._s(t.frm.er_effective_at))],1),t._v(" "),0===t.frm.er_step?a("span",[a("b-icon-bar-chart-steps"),t._v(" 임시저장")],1):t._e()]),t._v(" "),a("div",[a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"담당자"}},[a("font-awesome-icon",{attrs:{icon:"user"}}),t._v(t._s(t.frm.user.name))],1),t._v(" "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"전화번호"}},[a("font-awesome-icon",{attrs:{icon:"phone"}}),t._v(t._s(t.frm.user.tel))],1),t._v(" "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"이메일"}},[a("font-awesome-icon",{attrs:{icon:"at"}}),t._v(t._s(t.frm.user.email))],1)]),t._v(" "),a("div",[a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"내용"}},[a("font-awesome-icon",{attrs:{icon:"comment-dots"}}),t._v(" "),a("p",{domProps:{innerHTML:t._s(t.nl2br(t.frm.er_content))}})],1)]),t._v(" "),t.frm.file_info&&t.frm.file_info.length?a("div",[a("span",[a("b-icon",{attrs:{icon:"file-earmark-arrow-down-fill"}}),t._v(" "),t._l(t.frm.file_info,(function(e,r){return[a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"outline-info"},on:{click:function(a){return t.fileDown(e.path,e.fi_original)}}},[t._v(t._s(e.fi_original))]),t._v(" "),r!=Object.keys(t.frm.file_info).length-1?a("b"):t._e()]}))],2)]):t._e()])],1)],1),t._v(" "),t.frm.estimate_model&&t.frm.estimate_model.length?a("b-card",{staticClass:"gd_box"},[a("div",{staticClass:"tit"},[t._v("견적 상품")]),t._v(" "),t._l(t.frm.collect.lists,(function(e,r){return a("b-container",{key:"pa_"+r},[a("h5",[e.list[0].purchase_at?[t._v(t._s(e.list[0].purchase_at.pa_name)+" "),a("b",[t._v("직배송 상품")])]:[t._v("4SCIENCE")]],2),t._v(" "),t._l(e.list,(function(e,r){return a("b-row",{key:"gd_"+r},[a("b-col",t._l(e.estimate_model,(function(e){return a("b-row",{key:e.em_id,staticClass:"gd_list"},[a("b-col",[a("b-button",{attrs:{variant:"outline-primary",size:"sm",to:{name:"adm_goods_edit",params:{gd_id:e.em_gd_id}}}},[a("b-icon-link45deg")],1),t._v(" "),a("b",{staticClass:"gd_name"},[t._v(t._s(e.em_name))]),t._v(" "),a("b",{staticClass:"divider"},[t._v("/")]),t._v("\n                            "+t._s(e.em_code)+"\n                            "),a("b",{staticClass:"divider"},[t._v("/")]),t._v("\n                            "+t._s(e.em_catno)+"\n                            "),a("b",{staticClass:"divider"},[t._v("/")]),t._v("\n                            "+t._s(e.em_maker)+"\n                            "),a("b",{staticClass:"divider"},[t._v("/")]),t._v("\n                            "+t._s(e.em_unit)+"\n                        ")],1),t._v(" "),a("b-col",[t._v(t._s(e.em_spec))]),t._v(" "),a("b-col",{attrs:{tag:"i"}},[t._v("\n                            "+t._s(t._f("comma")(e.em_price))+" 원 "),a("font-awesome-icon",{attrs:{icon:"times"}}),t._v("\n                            "+t._s(t._f("comma")(e.em_ea))+" 개 "),a("font-awesome-icon",{attrs:{icon:"equals"}}),t._v(" "),a("b",{staticClass:"multi"},[t._v(t._s(t._f("comma")(e.em_price*e.em_ea))+" 원")])],1),t._v(" "),e.estimate_option.length?a("b-col",{staticClass:"opc",attrs:{cols:"12"}},t._l(e.estimate_option,(function(e){return a("b-row",{key:e.eo_id},[a("b-col",{attrs:{offset:"6"}},[t._v(t._s(e.eo_tit)+": "+t._s(e.eo_name))]),t._v(" "),a("b-col",{attrs:{tag:"i"}},[t._v("\n                                    "+t._s(t._f("comma")(e.eo_price))+" 원 "),a("font-awesome-icon",{attrs:{icon:"times"}}),t._v("\n                                    "+t._s(t._f("comma")(e.eo_ea))+" 개 "),a("font-awesome-icon",{attrs:{icon:"equals"}}),t._v(" "),a("b",{staticClass:"multi"},[t._v(t._s(t._f("comma")(e.eo_price*e.eo_ea))+" 원")])],1)],1)})),1):t._e()],1)})),1)],1)}))],2)}))],2):t._e(),t._v(" "),a("b-alert",{staticClass:"container price_info",attrs:{show:"",variant:"dark"}},[a("b-row",[a("b-col",{staticClass:"text-right"},[a("div",[t._v("합계: "),a("span",[t._v(t._s(t._f("comma")(t.frm.er_gd_price)))])]),t._v(" "),a("div",[t._v("부가세: "),a("span",[t._v(t._s(t._f("comma")(t.frm.er_surtax)))])]),t._v(" "),a("div",[t._v("배송료: "),a("span",[t._v(t._s(t._f("comma")(t.frm.er_dlvy_price)))])]),t._v(" "),t.frm.er_air_price?a("div",[t._v("항공운임료: "),a("span",[t._v(t._s(t._f("comma")(t.frm.er_air_price)))])]):t._e(),t._v(" "),a("div",[t._v("최종 결제금액: "),a("span",[t._v(t._s(t._f("comma")(t.frm.er_all_price)))])])])],1)],1)],1)}),[],!1,null,"edfdb040",null).exports}}]);